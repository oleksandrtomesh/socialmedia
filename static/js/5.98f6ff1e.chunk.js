(this["webpackJsonpreact-1"]=this["webpackJsonpreact-1"]||[]).push([[5],{213:function(e,t,n){"use strict";n.r(t);var c=n(35),s=n(54),r=n(0),o=n(2),a=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e,t=function(){console.log("WS closed"),setTimeout(n,3e3)};function n(){var n,s;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(s=e)||void 0===s||s.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),c(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(i,{webSocketChanel:n}),Object(o.jsx)(l,{webSocketChanel:n})]})},i=function(e){var t=e.webSocketChanel,n=Object(r.useState)([]),a=Object(s.a)(n,2),i=a[0],l=a[1];return Object(r.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);l((function(e){return[].concat(Object(c.a)(e),Object(c.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(o.jsx)("div",{style:{height:"500px",overflowY:"scroll"},children:i.map((function(e,t){return Object(o.jsx)(u,{message:e},t)}))})},u=function(e){var t=e.message;return Object(o.jsxs)("div",{children:[Object(o.jsx)("img",{src:t.photo,style:{width:"30px"}})," ",Object(o.jsx)("b",{children:t.userName}),Object(o.jsx)("br",{}),t.message,Object(o.jsx)("hr",{})]})},l=function(e){var t=e.webSocketChanel,n=Object(r.useState)(""),c=Object(s.a)(n,2),a=c[0],i=c[1],u=Object(r.useState)("pending"),l=Object(s.a)(u,2),j=l[0],b=l[1];Object(r.useEffect)((function(){var e=function(){b("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{children:[Object(o.jsx)("textarea",{onChange:function(e){return i(e.target.value)},value:a}),Object(o.jsx)("button",{disabled:null===t||"pending"===j,onClick:function(){a&&(null===t||void 0===t||t.send(a),i(""))},children:"Send"})]})})};t.default=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(a,{})})}}}]);
//# sourceMappingURL=5.98f6ff1e.chunk.js.map