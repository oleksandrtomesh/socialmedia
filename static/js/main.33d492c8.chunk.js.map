{"version":3,"sources":["api/api.ts","api/profileAPI.ts","api/loginApi.ts","api/headerAPI.ts","redux/auth-reducer.ts","redux/profile-reducer.ts","redux/app-reducer.ts","redux/redux-store.ts","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","components/Navbar/Navbar.tsx","redux/selectors/authSelectors.ts","components/Header/Header.tsx","components/Login/Login.tsx","components/Profile/ProfileStatus/ProfileStatusWithHooks.tsx","components/Profile/Info/ProfileInfoEditMode.tsx","components/Profile/Info/Info.tsx","components/Profile/MyPosts/AddNewPost/AddNewPost.tsx","redux/selectors/profileSelectors.ts","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/commonElements/UploadButton.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx","App.tsx","reportWebVitals.js","index.tsx","components/Navbar/Navbar.module.css","utilits/validators.ts","components/commonElements/InputCustom.tsx","components/commonElements/componentsStyles.ts","assets/images/Spinner.svg","components/commonElements/loader/loader.tsx","components/Profile/Info/Info.module.css","components/commonElements/CustomButton.tsx","components/Profile/MyPosts/Post/Post.module.css","redux/friendItems-reducer.ts","components/Header/Header.module.css","assets/images/avatar.png","redux/selectors/usersSelectors.ts","components/Login/Login.module.css","HightOrderComponent(hoc)/withAuthRedirect.tsx","redux/dialogs-reducer.ts","api/usersAPI.ts","redux/users-reducer.ts","api/chatAPI.ts","redux/chat-reducer.ts","components/commonElements/loader/Loader.module.css","components/Profile/ProfileStatus/ProfileStatus.module.css","components/Profile/Profile.module.css"],"names":["ResultCode","instance","axios","create","withCredentials","baseURL","headers","profileAPI","userId","get","then","res","data","status","put","resultCode","photoFile","formData","FormData","append","profile","loginApi","values","post","delete","url","headerAPI","response","initialState","isAuth","captcha","undefined","authUserProfile","authActionCreators","id","login","email","type","captchaUrl","path","userProfile","photos","authUser","dispatch","a","success","loginResponse","captchaIsRequired","messages","authReducer","state","action","postData","date","message","likeCounter","newPostText","userStatus","isFetching","profileActionCreators","setUserProfile","saveProfileInfo","getState","authorization","updateUserProfileResponse","profileReducer","newPostObj","newText","INITIALIZE_APP","initialized","appReducer","rootReducer","combineReducers","profilePage","dialogPage","dialogsReducer","friendsItems","friendsItemsReducer","usersPage","usersReducer","app","chat","chatReducer","store","createStore","applyMiddleware","thunkMiddleware","window","News","props","Music","Settings","Navbar","className","c","nav","item","activeClassName","activeLink","to","getAuthUserProfile","Header","useDispatch","useSelector","getIsAuth","classes","useStyles","AppBar","position","Toolbar","Typography","styles","headerText","headerUserData","logo","src","small","avatar","alt","fullName","Button","onClick","logoutButton","variant","Login","onSubmit","error","FORM_ERROR","render","handleSubmit","submitError","loginForm","name","component","InputCustom","validate","composeValidators","required","maxLengthCreator","CustomButton","ProfileStatusWithHooks","updateStatus","useState","editMode","setEditMode","setStatus","useEffect","profileStatus","TextField","autoFocus","onChange","event","currentTarget","value","onBlur","label","size","ProfileInfoEditMode","saveProfile","initialValues","editModeForm","checkError","Object","keys","contacts","map","key","ProfileInfo","isOwner","info","aboutMe","lookingForAJobDescription","contactTitle","contactValue","loginButton","fullWidth","Contact","href","target","rel","Info","AddNewPost","addNewPost","style","padding","Grid","container","direction","spacing","xs","getUserProfile","getAuthUserData","getUserStatus","getIsProfileFetching","getPostData","Post","postInfo","like","makeStyles","withoutPosts","width","textAlign","MyPosts","Paper","square","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","p","UploadButton","onChangeHandler","buttonAssign","htmlFor","display","uploadButton","Profile","isProfileFetching","savePhoto","photo","updateUserPhotoResponse","saveUserPhoto","justify","alignContent","md","marginTop","img","large","files","length","ProfileContainer","React","memo","authorizedUserId","setUserStatus","refreshProfile","parseInt","setProfile","useParams","withAuthRedirect","DialogsContainer","lazy","UsersPage","ChatPage","App","componentDidMount","sm","fallback","exact","Component","connector","connect","promise","Promise","all","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","module","exports","maxLength","validators","reduce","validator","newValue","toUpperCase","slice","indexOf","input","meta","restProps","children","textField","color","touched","helperText","background","height","Loader","loader","disabled","friendsItemsActions","addFollowingUser","user","removeUserFromFriendsItems","filter","friend","getUsers","users","getPageSize","pageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","currentPage","getIsFetching","getFollowingInProgress","followingInProgress","getFilter","mapStateToPropsForRedirect","RedirectComponent","this","ADD_MESSAGE","messageData","dialogData","newMessageText","dialogsActionCreators","addMessage","newMessageObj","usersAPI","term","isFollow","userReducerActionsCreators","payload","totalCount","userFollowed","getUsersWithFilter","items","handlePageChange","pageNumber","toggleFollowingUser","u","followed","subscribers","wsChanel","closeHandler","console","log","setTimeout","createWsChanel","messageHandler","e","JSON","parse","forEach","s","openHandler","notifySubscriberAboutStatus","errorHandler","cleanUp","removeEventListener","close","WebSocket","addEventListener","chatApi","eventName","callback","push","send","chatActionCreators","_newMessageHandler","_statusChangedHandler","newMessageHandler","statusChangedHandler","startMessagesListening","stopMessagesListening","sendMessage","m","v1","index","array"],"mappings":"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","file":"static/js/main.33d492c8.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\n//enum for resultCode\r\n\r\nexport enum ResultCode {\r\n    success = 0,\r\n    error = 1,\r\n    captchaIsRequired = 10\r\n}\r\n\r\n// create instance for request to server\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"API-KEY\": \"94255a0f-3471-4b7b-b59d-a3f0dda8cb88\"\r\n    }\r\n});","import { PhotosType, UserProfileType } from '../types/types';\r\nimport { instance, ResultCode } from './api';\r\n\r\nexport const profileAPI = {\r\n    getUserProfile(userId: number | null) {\r\n        return (\r\n            instance.get<UserProfileType>(`profile/` + userId).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    //get user status from server\r\n    getUserStatus(userId: number | null) {\r\n        return (\r\n            instance.get<string>(`profile/status/` + userId).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    //update auth user status\r\n    updateUserStatus(status: string | null) {\r\n        return (\r\n            instance.put<ProfileApiResponseType>(`profile/status`, { status: status })\r\n                .then(res => res.data.resultCode)\r\n        );\r\n    },\r\n\r\n    updateUserPhoto(photoFile: any) {\r\n        const formData = new FormData();\r\n        formData.append('image', photoFile);\r\n        return (\r\n            instance.put<UpdateUserPhotoResponseType>(`profile/photo`, formData).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    updateUserProfile(profile: UserProfileType) {\r\n        return (\r\n            instance.put<ProfileApiResponseType>(`profile`, profile).then(res => res.data)\r\n        );\r\n    }\r\n};\r\n\r\nexport type ProfileApiResponseType = {\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n    data:any\r\n}\r\n\r\nexport type UpdateUserPhotoResponseType = {\r\n    data: {\r\n        photos: PhotosType\r\n    }\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n}","import { instance, ResultCode } from './api';\r\n\r\n\r\nexport const loginApi = {\r\n    login(values: any) {\r\n        return (\r\n            instance.post<LoginApiResponseType>(`auth/login`, values).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    logout() {\r\n        return (\r\n            instance.delete<LoginApiResponseType>(`auth/login`).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    getCaptcha() {\r\n        return (\r\n            instance.get<{ url: string; }>(`security/get-captcha-url`).then(res => res.data.url)\r\n        );\r\n    }\r\n};\r\n\r\nexport type LoginApiResponseType = {\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n    data:any\r\n}","import { instance, ResultCode } from './api';\r\n\r\n\r\nexport const headerAPI = {\r\n    authUser() {\r\n        return (\r\n            instance.get<GetUserProfileResponseType>(`auth/me`)\r\n                .then(response => response.data)\r\n        );\r\n    }\r\n};\r\n\r\nexport type GetUserProfileResponseType = {\r\n    data: {\r\n        id: number\r\n        email: string\r\n        login: string\r\n    }\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n}","import { ResultCode } from '../api/api';\r\nimport { loginApi } from \"../api/loginApi\";\r\nimport { profileAPI } from \"../api/profileAPI\";\r\nimport { headerAPI } from \"../api/headerAPI\";\r\nimport { UserProfileType, PhotosType, InferActionsType, ThunkType } from '../types/types';\r\n\r\n//Initial State\r\ntype DataType = {\r\n    id: number | null\r\n    login: string | null\r\n    email: string | null\r\n}\r\n\r\nlet initialState= {\r\n    data: null as DataType | null,\r\n    isAuth: false,  //check if user login\r\n    captcha: undefined as string | undefined,  //captcha url if result code === 10\r\n    authUserProfile: null as UserProfileType | null\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n//Reducer\r\nconst authReducer = (state = initialState, action: AuthActionTypes):InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'app/auth-reducer/ADD_DATA':\r\n            return {\r\n                ...state,\r\n                data: action.data,\r\n                isAuth: action.isAuth,\r\n            };\r\n\r\n        case 'app/auth-reducer/ADD_CAPTCHA_URL':\r\n            return {\r\n                ...state,\r\n                captcha: action.path\r\n            };\r\n\r\n        case 'app/auth-reducer/AUTH_USER_PROFILE':\r\n            return{\r\n                ...state,\r\n                authUserProfile: action.userProfile\r\n            };\r\n\r\n            case 'app/auth-reducer/SAVE_PHOTO_SUCCESS': \r\n                return {\r\n                    ...state,\r\n                    authUserProfile: {...state.authUserProfile, photos: action.photos},\r\n                }\r\n            ;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n//Action Creators\r\nexport type AuthActionTypes = InferActionsType<typeof authActionCreators>\r\n\r\nexport const authActionCreators = {\r\n\r\n    addAuthUserData: (id: number | null, login: string | null, email: string | null, isAuth: boolean) => \r\n        ({type: 'app/auth-reducer/ADD_DATA', data: {id, login, email}, isAuth} as const),\r\n    addCaptchaUrl: (captchaUrl: string | undefined) => ({type: 'app/auth-reducer/ADD_CAPTCHA_URL', path: captchaUrl} as const),\r\n    addAuthUserProfile: (userProfile: UserProfileType) => ({type: 'app/auth-reducer/AUTH_USER_PROFILE', userProfile} as const),\r\n    saveAuthUserPhotoSuccess: (photos: PhotosType) => \r\n        ({type: 'app/auth-reducer/SAVE_PHOTO_SUCCESS', photos} as const)\r\n}\r\n\r\n\r\n//side effect, thunks\r\n\r\nexport type AuthReducerThunkType = ThunkType<AuthActionTypes>\r\n\r\nexport const authUser = (): AuthReducerThunkType => async (dispatch) => {\r\n        const data = await headerAPI.authUser()\r\n        if (data.resultCode === ResultCode.success) {\r\n            let {\r\n                id,\r\n                login,\r\n                email\r\n            } = data.data;\r\n            dispatch(authActionCreators.addAuthUserData(id, login, email, true));\r\n            const userProfile = await profileAPI.getUserProfile(id)\r\n            dispatch(authActionCreators.addAuthUserProfile(userProfile));\r\n        }\r\n    }\r\n\r\ntype ValuesType = {\r\n    email: string\r\n    password: string\r\n}\r\n\r\nexport const login = (values: ValuesType):AuthReducerThunkType => {\r\n    return async (dispatch) => {\r\n        const loginResponse = await loginApi.login(values);\r\n        if (loginResponse.resultCode === ResultCode.success) {\r\n            dispatch(authUser());\r\n            dispatch(authActionCreators.addCaptchaUrl(undefined));\r\n        } else {\r\n            if (loginResponse.resultCode === ResultCode.captchaIsRequired){\r\n                const captchaUrl = await loginApi.getCaptcha()\r\n                dispatch(authActionCreators.addCaptchaUrl(captchaUrl))\r\n            }\r\n            return loginResponse.messages[0]\r\n        }\r\n    };\r\n}\r\n\r\nexport const logout = ():AuthReducerThunkType => async (dispatch) => {\r\n    const logoutResponse = await loginApi.logout();\r\n    if (logoutResponse.resultCode === ResultCode.success) {\r\n        dispatch(authActionCreators.addAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n\r\nexport default authReducer;","import { InferActionsType, ThunkType } from './../types/types';\r\nimport { ResultCode } from '../api/api';\r\nimport { profileAPI } from \"../api/profileAPI\";\r\nimport { UserProfileType, PhotosType } from '../types/types';\r\nimport { authActionCreators, AuthActionTypes } from './auth-reducer';\r\nimport { AppStateType } from './redux-store';\r\n\r\n//initial State\r\nexport type PostDataType = {\r\n    id: number\r\n    date: string\r\n    message: string\r\n    likeCounter: number\r\n}\r\n\r\nlet initialState = {\r\n    postData: [\r\n        {id: 1, date: '04/12/2020', message: \"Hi, how are you?\", likeCounter: 12},\r\n        {id: 2, date: '04/12/2020', message: \"It's my firs post\", likeCounter: 13},\r\n        {id: 3, date: '04/12/2020', message: \"It's my second post\", likeCounter: 14},\r\n        {id: 4, date: '04/12/2020', message: \"It's my third post\", likeCounter: 15},\r\n        {id: 5, date: '04/12/2020', message: \"It's my fourth post\", likeCounter: 16},\r\n        {id: 6, date: '04/12/2020', message: \"It's my fifth post\", likeCounter: 17}\r\n    ] as Array<PostDataType>,\r\n    newPostText: \"\" as string,\r\n    userProfile: null as UserProfileType | null,\r\n    userStatus: \"\" as string | null,\r\n    isFetching: false as boolean\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n//Reducer\r\nconst profileReducer = (state = initialState, action: ProfileActionTypes):InitialStateType  => {\r\n\r\n        switch (action.type) {\r\n            case 'app/profile-reducer/ADD-POST':\r\n                let newPostObj = {\r\n                    id: 5,\r\n                    date: action.date,\r\n                    message: action.newPostText,\r\n                    likeCounter: 0\r\n                };\r\n                \r\n                return {\r\n                    ...state,\r\n                    postData: [newPostObj, ...state.postData],\r\n                    newPostText: \"\"\r\n                };\r\n\r\n            case 'app/profile-reducer/UPDATE-TEXT-AREA': \r\n\r\n                return {\r\n                    ...state,\r\n                    newPostText: action.newText\r\n                };\r\n            ;\r\n\r\n            case 'app/profile-reducer/SET_USER_PROFILE': \r\n                return {\r\n                    ...state,\r\n                    userProfile: action.profile\r\n                }\r\n            ;\r\n\r\n            case 'app/profile-reducer/SET_USER_STATUS': {\r\n                return {\r\n                    ...state,\r\n                    userStatus: action.status\r\n                };\r\n            }\r\n\r\n            case 'app/profile-reducer/SAVE_PHOTO_SUCCESS': \r\n                return {\r\n                    ...state,\r\n                    userProfile: {...state.userProfile, photos: action.photos},\r\n                }\r\n            ;\r\n\r\n            case 'app/profile-reducer/IS_FETCHING': \r\n                return {\r\n                    ...state,\r\n                    isFetching: action.isFetching\r\n                }\r\n\r\n            default:\r\n                return state;\r\n        }\r\n    }\r\n\r\n//Action Creators\r\ntype ProfileActionTypes = InferActionsType<typeof profileActionCreators>\r\n\r\n\r\n\r\nexport const profileActionCreators = {\r\n    addPost: (newPostText: string, date: string)  => ({type: 'app/profile-reducer/ADD-POST', newPostText, date} as const),\r\n    updateTextAreaActionCreator: (text: string)  => ({ type: 'app/profile-reducer/UPDATE-TEXT-AREA', newText: text } as const),\r\n    setProfile: (profile: UserProfileType) => ({ type: 'app/profile-reducer/SET_USER_PROFILE', profile } as const),\r\n    setUserStatus: (status:string | null) => ({type: 'app/profile-reducer/SET_USER_STATUS', status} as const),\r\n    savePhotoSuccess: (photos: PhotosType)  => ({type: 'app/profile-reducer/SAVE_PHOTO_SUCCESS', photos} as const),\r\n    isFetching: (isFetching: boolean)  => ({type: 'app/profile-reducer/IS_FETCHING', isFetching} as const)\r\n}\r\n\r\n\r\n\r\n//side effects, Thinks\r\n\r\ntype ProfileReducerThunkType = ThunkType<ProfileActionTypes | AuthActionTypes> \r\n\r\nexport const addNewPost = (newPostText: string, date: string): ProfileReducerThunkType => {\r\n    return (dispatch) => dispatch(profileActionCreators.addPost(newPostText, date))\r\n};\r\n\r\nexport const setUserProfile = (userId: number | null): ProfileReducerThunkType => async (dispatch) => { \r\n            dispatch(profileActionCreators.isFetching(true));\r\n            const userProfile = await profileAPI.getUserProfile(userId);\r\n            dispatch(profileActionCreators.setProfile(userProfile));\r\n            dispatch(profileActionCreators.isFetching(false));\r\n        }\r\n\r\nexport const setStatus = (userId:number | null): ProfileReducerThunkType => async (dispatch) => {\r\n        const userStatus = await profileAPI.getUserStatus(userId)\r\n                dispatch(profileActionCreators.setUserStatus(userStatus))\r\n        }\r\n\r\nexport const updateStatus = (status: string | null): ProfileReducerThunkType => async (dispatch) => {\r\n    const updateStatusResultCode = await profileAPI.updateUserStatus(status)\r\n        if (updateStatusResultCode === ResultCode.success ){\r\n            dispatch(profileActionCreators.setUserStatus(status))\r\n        }\r\n}\r\n\r\nexport const saveUserPhoto = (photo: File): ProfileReducerThunkType => async (dispatch) => {\r\n    dispatch(profileActionCreators.isFetching(true))\r\n    const updateUserPhotoResponse = await profileAPI.updateUserPhoto(photo)\r\n        if (updateUserPhotoResponse.resultCode === ResultCode.success ){\r\n            dispatch(profileActionCreators.savePhotoSuccess(updateUserPhotoResponse.data.photos));\r\n            dispatch(authActionCreators.saveAuthUserPhotoSuccess(updateUserPhotoResponse.data.photos));\r\n        }\r\n    dispatch(profileActionCreators.isFetching(false))\r\n}\r\n\r\nexport const saveProfileInfo = (profile: UserProfileType): ProfileReducerThunkType => async (dispatch, getState: ()=> AppStateType) => {\r\n    const userId: number | null = getState().authorization.data!.id;\r\n    const updateUserProfileResponse = await profileAPI.updateUserProfile(profile)\r\n    if (updateUserProfileResponse.resultCode === ResultCode.success){\r\n        dispatch(setUserProfile(userId))\r\n    } else {\r\n        return updateUserProfileResponse.messages;\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import { ThunkType } from '../types/types';\r\nimport { authUser } from './auth-reducer';\r\n\r\n//Action types\r\nconst INITIALIZE_APP = 'myApp/auth-reducer/INITIALIZE_APP';\r\n\r\n//Initial State\r\n\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n//Reducer\r\n\r\n\r\nconst appReducer = (state = initialState, action: ActionType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZE_APP:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n\r\n        default:\r\n            return state;\r\n            \r\n    }\r\n};\r\n\r\n//action creators\r\ntype ActionType = initializingSuccessActionCreatorType;\r\n\r\ntype initializingSuccessActionCreatorType = {\r\n    type: typeof INITIALIZE_APP\r\n};\r\n\r\nexport const initializingSuccess = ():initializingSuccessActionCreatorType  => ({type: INITIALIZE_APP});\r\n\r\n//thunkCreator for auth user\r\n\r\nexport type appThunkType = ThunkType<ActionType>\r\n\r\nexport const initialized = (): appThunkType => {\r\n    //thunk what return resolve of all promises\r\n    return (dispatch) => {\r\n        let promise = dispatch(authUser());\r\n        Promise.all([promise]).then(() => {\r\n            dispatch(initializingSuccess())\r\n        })\r\n    }\r\n}\r\n\r\nexport default appReducer;","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport friendsItemsReducer from \"./friendItems-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from './auth-reducer';\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport appReducer from './app-reducer';\r\nimport chatReducer from './chat-reducer';\r\n\r\n//combine reducers function what make new reducer\r\nlet rootReducer = combineReducers ({\r\n    profilePage: profileReducer,\r\n    dialogPage: dialogsReducer,\r\n    friendsItems: friendsItemsReducer,\r\n    usersPage: usersReducer,\r\n    authorization: authReducer,\r\n    app: appReducer,\r\n    chat: chatReducer\r\n})\r\n\r\n//get type of function rootReducer\r\ntype RootReducerType = typeof rootReducer // (globalState: AppStateType) => AppStateType\r\n//get type of response of function rootReducer\r\nexport type AppStateType = ReturnType<RootReducerType> \r\n\r\n\r\n// //@ts-ignore\r\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\r\n// const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\nconst store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\n//@ts-ignore\r\nwindow.store = store;\r\n\r\nexport default store;","//import c from './News.module.css'\r\nimport React from \"react\";\r\n\r\nconst News: React.FC = (props) => {\r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News;","import React from 'react'\r\n\r\nconst Music: React.FC = () => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;","//import c from './Settings.module.css'\r\nimport React from 'react'\r\n\r\nconst Settings: React.FC = (props) => {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n//import Friends from './Friends/Friends';\r\nimport c from './Navbar.module.css';\r\n\r\nconst Navbar: React.FC = (props) => {\r\n  //const friendsItems = useSelector(getFriendsItems)\r\n\r\n  ////let friendItem = friendsItems.map(friendsItems => <Friends id={friendsItems.id} name={friendsItems.name} />)\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className={c.nav}>\r\n        <nav >\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/profile\">Profile</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/users\">Users</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/dialogs\">Messages</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/chat\">Chat</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/news\">News</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/music\">Music</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/settings\">Settings</NavLink>\r\n          </div>\r\n        </nav>\r\n      </div>\r\n      {/* <div className={c.friendsItems}>\r\n        <h3>Friends</h3>\r\n        <div className={c.friends}>\r\n          {friendItem}\r\n        </div>\r\n      </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navbar;","import { AppStateType } from './../redux-store';\r\n\r\nexport const getAuthUserProfile = (state: AppStateType) =>\r\n    state.authorization.authUserProfile","import { NavLink } from 'react-router-dom';\r\nimport styles from './Header.module.css';\r\nimport { useStyles } from '../commonElements/componentsStyles';\r\nimport { Button, Toolbar, Typography } from '@material-ui/core';\r\nimport avatar from '../../assets/images/avatar.png'\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getIsAuth } from '../../redux/selectors/usersSelectors';\r\nimport { logout } from '../../redux/auth-reducer';\r\nimport { getAuthUserProfile } from '../../redux/selectors/authSelectors';\r\nimport { AppBar } from '@material-ui/core';\r\n\r\nconst Header: React.FC = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const authUserProfile = useSelector(getAuthUserProfile)\r\n    const isAuth = useSelector(getIsAuth)\r\n\r\n\r\n    const classes = useStyles();\r\n    const onSubmit = () =>{\r\n        dispatch(logout())\r\n    }\r\n\r\n    return (\r\n        <AppBar position=\"static\">\r\n            <Toolbar>\r\n                <Typography className={styles.headerText}>Social Network</Typography>\r\n                {isAuth && authUserProfile\r\n                    ? <NavLink to={\"/profile/\"} className={styles.headerUserData}>\r\n                        <img className={styles.logo} src={authUserProfile.photos?.small !== null ? authUserProfile.photos?.small : avatar} alt=\"profile\"></img>\r\n                        <span>{authUserProfile.fullName}</span>\r\n                    </NavLink>\r\n                    : <NavLink className={styles.headerUserData} to='/login'>\r\n                        <Typography>You are not authorized</Typography>\r\n                    </NavLink>}\r\n                <Button onClick={onSubmit} className={classes.logoutButton} variant=\"contained\" type=\"submit\">Logout</Button>\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n}\r\n\r\nexport default Header","import React from 'react'\r\nimport {Form, Field} from 'react-final-form'\r\nimport { InputCustom } from \"../commonElements/InputCustom\";\r\nimport { CustomButton } from \"../commonElements/CustomButton\";\r\nimport { composeValidators, maxLengthCreator, required } from '../../utilits/validators';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { FORM_ERROR } from 'final-form';\r\nimport styles from './Login.module.css'\r\nimport { getIsAuth } from '../../redux/selectors/usersSelectors';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { AppStateType } from '../../redux/redux-store';\r\nimport { login } from '../../redux/auth-reducer';\r\n\r\n\r\n\r\nconst Login: React.FC = () => {\r\n\r\n  const isAuth = useSelector(getIsAuth)\r\n  const captcha = useSelector((state: AppStateType) => state.authorization.captcha)\r\n\r\n  const dispatch = useDispatch()\r\n\r\n\r\n\r\n  const onSubmit = async (values: ValuesType) => {\r\n    let error = await dispatch(login(values));\r\n    if (error !== undefined) {\r\n      return { [FORM_ERROR]: error }\r\n    }\r\n  }\r\n\r\n  if (isAuth === true){\r\n    return <Redirect to=\"/profile\" />\r\n  }\r\n  \r\n  \r\n  return(\r\n  <Form\r\n    onSubmit ={onSubmit}\r\n    captcha = {captcha}\r\n    render={({handleSubmit, submitError}) => (\r\n        <div>\r\n          <form className={styles.loginForm} onSubmit={handleSubmit}>\r\n            <div className={styles.email}>\r\n              <Field<string> name={\"email\"} component={InputCustom} validate={composeValidators(required, maxLengthCreator(30))}/>\r\n            </div>\r\n            <div>\r\n              <Field<string> name={\"password\"} component={InputCustom} type=\"password\" validate={composeValidators(required, maxLengthCreator(30))} />\r\n            </div>\r\n            <div>\r\n              <Field<boolean> name={\"rememberMe\"} component=\"input\" type={\"checkbox\"} />\r\n              <span>remember me</span>\r\n            </div>\r\n            {captcha &&\r\n              <div> \r\n                <img src={captcha} alt=\"captcha\"/>\r\n                <Field<string>  name=\"captcha\" component={InputCustom}/>\r\n              </div>}\r\n            {submitError && <div className={styles.error}>{submitError}</div>}\r\n            <div>\r\n            <CustomButton>Login</CustomButton>\r\n              {/* <Button variant=\"contained\" color=\"primary\" type=\"submit\">Login</Button>  */}\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n      )\r\n\r\n    }\r\n  />)\r\n}\r\n\r\nexport default Login;\r\n\r\ntype ValuesType = {\r\n  email: string\r\n  password: string\r\n  rememberMe: boolean\r\n  captcha: string | null\r\n}","import React, { ChangeEvent, useEffect, useState } from 'react';\r\nimport styles from './ProfileStatus.module.css';\r\nimport { TextField, Typography } from '@material-ui/core';\r\n\r\ntype PropsType = {\r\n    userStatus: string | null\r\n    updateStatus: (status: string | null) => void\r\n}\r\n\r\nconst ProfileStatusWithHooks: React.FC<PropsType> = ({userStatus, updateStatus}) => {\r\n\r\n    let [editMode, setEditMode] = useState(false);\r\n    let [status, setStatus] = useState(userStatus);\r\n    \r\n    useEffect( () => {setStatus(userStatus)}, [userStatus] );\r\n\r\n    const activateStatusEditor = () => {\r\n        setEditMode(true);\r\n    }\r\n\r\n    const deactivateStatusEditor = () => {\r\n        setEditMode(false);\r\n        updateStatus(status);\r\n    }\r\n\r\n    const onStatusChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(event.currentTarget.value);\r\n    }\r\n\r\n    return (\r\n        <div className={styles.profileStatus}>\r\n            {\r\n                editMode\r\n                    ? <div>\r\n                        <TextField autoFocus={true}\r\n                            onChange={onStatusChange}\r\n                            onBlur={deactivateStatusEditor}\r\n                            type=\"text\"\r\n                            value={status} \r\n                            label=\"Status\"\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    : <div>\r\n                        <Typography variant=\"overline\" onClick={activateStatusEditor}> <b>Status: </b>{status || `No Status`}</Typography>\r\n                        <div>\r\n                            <i>Click to change</i>\r\n                        </div>\r\n                    </div>\r\n\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfileStatusWithHooks;","import {Form, Field} from 'react-final-form';\r\nimport { FORM_ERROR } from 'final-form';\r\nimport { InputCustom } from \"../../commonElements/InputCustom\";\r\nimport { CustomButton } from \"../../commonElements/CustomButton\";\r\nimport styles from './Info.module.css'\r\nimport {checkError} from \"../../../utilits/validators\"\r\nimport React from 'react';\r\nimport { UserProfileType } from '../../../types/types';\r\nimport { useDispatch } from 'react-redux';\r\nimport { saveProfileInfo } from '../../../redux/profile-reducer';\r\nimport { Typography } from '@material-ui/core';\r\n\r\ntype ProfileInfoEditModeType = {\r\n    setEditMode: (mode: boolean) => void\r\n    userProfile: UserProfileType | null\r\n}\r\n\r\n\r\nconst ProfileInfoEditMode: React.FC<ProfileInfoEditModeType> = ({setEditMode, userProfile, ...props}) => { \r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const saveProfile = async (values: UserProfileType) => {\r\n        const messages = await dispatch(saveProfileInfo(values))\r\n        if (messages !== undefined){\r\n            return { [FORM_ERROR]: messages }\r\n        } else {\r\n            setEditMode(false)\r\n        }\r\n    }\r\n    \r\n    return <div className={styles.editMode}>\r\n        <Typography variant=\"h4\">Edit Mode</Typography>\r\n        <Form\r\n            onSubmit={saveProfile}\r\n            initialValues={userProfile}\r\n            render={({handleSubmit, submitError}) => {\r\n                return <form onSubmit={handleSubmit} className={styles.editModeForm}>\r\n                    <div>\r\n                        <Field name=\"fullName\" component={InputCustom} label=\"Full Name\"/> \r\n                    </div>\r\n                    <div>\r\n                        <Field name=\"aboutMe\" component={InputCustom} label=\"About Me\"/> \r\n                        {submitError && <div className={styles.error}>{checkError(submitError, \"AboutMe\")}</div>}\r\n                    </div>\r\n                    {/* <div className={styles.lookingForAJob}>\r\n                        <b>Looking for job: </b>\r\n                            <Field name=\"lookingForAJob\" component='input' type='checkbox'/>\r\n                    </div> */}\r\n                    <div>\r\n                        <Field name=\"lookingForAJobDescription\" label=\"My professional skill\" component={InputCustom}/> \r\n                        {submitError && <div className={styles.error}>{checkError(submitError,\"LookingForAJobDescription\")}</div>}\r\n                    </div>\r\n                    <div>\r\n                        <Typography variant=\"h5\">Contacts:</Typography> \r\n                            {userProfile != null && Object.keys(userProfile.contacts!).map(key => {\r\n                                return <div key={key}>\r\n                                        <Field  name={\"contacts.\" + key} component={InputCustom} label={key} />\r\n                                        {submitError && <div className={styles.error}>{checkError(submitError, key)}</div>}\r\n                                    </div>}\r\n                        )}\r\n                    </div>\r\n                    <CustomButton>Save</CustomButton> \r\n                </form>\r\n                }\r\n            }\r\n        />\r\n    </div>\r\n}\r\n\r\nexport default ProfileInfoEditMode;","import React from 'react';\r\nimport styles from './Info.module.css';\r\nimport ProfileStatusWithHooks from '../ProfileStatus/ProfileStatusWithHooks';\r\nimport { useState } from 'react';\r\nimport ProfileInfoEditMode from './ProfileInfoEditMode';\r\nimport { useStyles } from '../../commonElements/componentsStyles';\r\nimport { Button, Typography } from '@material-ui/core';\r\nimport { UserProfileType} from '../../../types/types';\r\n\r\ntype PropsType = {\r\n  userStatus: string | null\r\n  userProfile: UserProfileType | null\r\n  isOwner: boolean\r\n  updateStatus: (status: string | null) => void\r\n}\r\n\r\nconst Info: React.FC<PropsType> = ({userStatus, updateStatus, ...props}) => {\r\n\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <ProfileStatusWithHooks userStatus={userStatus} updateStatus={updateStatus}/>\r\n      {editMode \r\n        ? <ProfileInfoEditMode setEditMode={setEditMode} {...props} /> \r\n        : <ProfileInfo setEditMode={setEditMode} {...props} />}\r\n    </div>\r\n  );\r\n}\r\n\r\ntype ProfileInfoPropsType = {\r\n  userProfile: UserProfileType | null\r\n  isOwner: boolean\r\n  setEditMode: (mode: boolean) => void;\r\n} \r\n\r\nconst ProfileInfo: React.FC<ProfileInfoPropsType> = ({setEditMode, userProfile,isOwner}) => {\r\n  const classes = useStyles()\r\n  const changeEditMode = () => {\r\n    setEditMode(true);\r\n  }\r\n  if (userProfile != null) {\r\n    return <div className={styles.info}>\r\n      <Typography variant=\"h3\">{userProfile.fullName}</Typography>\r\n      <Typography variant=\"overline\" component=\"div\">\r\n        {userProfile.aboutMe && <b>About me:</b>} {userProfile.aboutMe}\r\n      </Typography>\r\n      {/* <div>\r\n        <b>Looking for job: </b>{userProfile.lookingForAJob ? \"Yes\" : \"No\"}\r\n      </div> */}\r\n      <Typography variant=\"overline\" component=\"div\">\r\n        {userProfile.lookingForAJobDescription && <span><b>My professional skill:</b> {userProfile.lookingForAJobDescription}</span>}\r\n      </Typography>\r\n        <Typography variant=\"overline\">Contacts:</Typography> {Object.keys(userProfile.contacts!).map(key => {\r\n          if(userProfile.contacts != null){\r\n            return <Contact key={key} contactTitle={key} contactValue={userProfile.contacts[key]!} />\r\n          }\r\n          return null\r\n        })}\r\n      {isOwner && <Button onClick={changeEditMode} className={classes.loginButton} variant=\"contained\" type=\"submit\" fullWidth>Edit Mode</Button>}\r\n    </div>\r\n  }\r\n  return null\r\n}\r\n\r\ntype ContactPropsType ={\r\n  contactTitle: string\r\n  contactValue: string\r\n}\r\n\r\nconst Contact: React.FC<ContactPropsType> = ({contactTitle, contactValue}) => {\r\n  \r\n  return <div>\r\n    {contactValue && \r\n      <span>\r\n        <Typography variant=\"overline\">\r\n          <b>{contactTitle}: </b>\r\n          <a href={contactValue} target=\"_blank\" rel=\"noreferrer\" >{contactValue}</a>\r\n        </Typography>\r\n      </span>\r\n    } \r\n  </div>\r\n  }\r\n\r\nexport default Info;","import React from 'react';\r\nimport { Field, Form } from 'react-final-form';\r\nimport { maxLengthCreator} from '../../../../utilits/validators';\r\nimport { InputCustom } from \"../../../commonElements/InputCustom\";\r\nimport { CustomButton } from \"../../../commonElements/CustomButton\";\r\nimport { Grid} from '@material-ui/core';\r\n\r\ntype AddNewPostType = {\r\n  addNewPost: (newPostText: string) => void\r\n}\r\n\r\nconst AddNewPost: React.FC<AddNewPostType> = ({addNewPost}) => {\r\n\r\n  let addPost = (value: {newPostText: string}) => {\r\n      addNewPost(value.newPostText);\r\n      value.newPostText = \"\";\r\n  }\r\n    \r\n  return (\r\n  <div >\r\n    <Form onSubmit={addPost}\r\n      render={ ({handleSubmit}) => (\r\n          <form onSubmit={handleSubmit} style={{padding:\"15px\"}}>\r\n            <Grid container direction=\"row\" spacing={2} >\r\n            <Grid item xs={9}>\r\n              <Field<string> \r\n                name=\"newPostText\" \r\n                component= {InputCustom} \r\n                label=\"Something new?\"\r\n                validate={maxLengthCreator(150)}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={3}>\r\n              <CustomButton>Post</CustomButton>\r\n            </Grid>\r\n            </Grid>\r\n            \r\n          </form>\r\n        )\r\n        }\r\n    />\r\n  </div> \r\n  );\r\n}\r\n\r\n\r\nexport default AddNewPost;","import { AppStateType } from './../redux-store';\r\n\r\n\r\nexport const getUserProfile = (state: AppStateType) =>\r\n    state.profilePage.userProfile\r\n\r\nexport const getAuthUserData = (state: AppStateType) =>\r\n    state.authorization.data\r\n\r\nexport const getUserStatus = (state: AppStateType) =>\r\n    state.profilePage.userStatus\r\n\r\nexport const getIsProfileFetching = (state: AppStateType) =>\r\n    state.profilePage.isFetching\r\n\r\nexport const getPostData = (state: AppStateType) =>\r\n    state.profilePage.postData\r\n\r\nexport const getNewPostText = (state: AppStateType) =>\r\n    state.profilePage.newPostText\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux'\r\nimport { getUserProfile } from '../../../../redux/selectors/profileSelectors';\r\nimport c from './Post.module.css';\r\n\r\n\r\nconst Post: React.FC<PropsType> = ({message, likeCounter, date}) => {\r\n\r\n  const fullName = useSelector(getUserProfile)?.fullName\r\n  \r\n  return (\r\n    <div>\r\n      <div className={c.item}>\r\n        <div className={c.postInfo}>\r\n          <img src=\"https://ps.w.org/wp-user-avatar/assets/icon-256x256.png?rev=1755722\" alt=\"postAvatar\" />\r\n          <div className={c.name}>\r\n            <div>{fullName}</div>\r\n            <div>{date}</div>\r\n          </div>\r\n        </div>\r\n        <div className={c.message}>\r\n          {message}\r\n        </div>\r\n        <div className={c.like}>\r\n          Like {likeCounter}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Post;\r\n\r\n\r\ntype PropsType = {\r\n  message: string\r\n  likeCounter: number\r\n  date: string\r\n}","import React from 'react';\r\nimport AddNewPost from './AddNewPost/AddNewPost';\r\nimport styles from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport {addNewPost} from '../../../redux/profile-reducer'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getPostData } from '../../../redux/selectors/profileSelectors';\r\nimport { Grid, makeStyles, Paper, Typography } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  withoutPosts: {\r\n    width: '100%',\r\n    padding: '1rem',\r\n    textAlign: 'center'\r\n  }\r\n})\r\n\r\nconst MyPosts: React.FC<MyPostsType> = ({isOwner}) => {\r\n  const classes = useStyles()\r\n  const dispatch = useDispatch()\r\n\r\n  const postData = useSelector(getPostData) \r\n  const addPost = (newPostText: string) => {\r\n      let today: Date = new Date();\r\n      let dd = String(today.getDate()).padStart(2, '0');\r\n      let mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n      let yyyy = today.getFullYear();\r\n      let date = mm + '/' + dd + '/' + yyyy;\r\n      dispatch(addNewPost(newPostText, date))\r\n  }\r\n\r\n  if (isOwner === true) {\r\n    return <Grid container direction=\"column\" spacing={2}>\r\n          <Grid item>\r\n            <Paper square>\r\n            <AddNewPost addNewPost={addPost} />\r\n            </Paper>\r\n          </Grid>\r\n          <Grid item>\r\n            {postData.map(p =><Paper key={p.message}>\r\n                  <Post  message={p.message} likeCounter={p.likeCounter} date={p.date} />\r\n                </Paper>)}\r\n          </Grid>\r\n        </Grid>;\r\n  } else {\r\n    return <Paper square className={classes.withoutPosts}>\r\n      <Typography variant='overline'>\r\n        This user does not have posts yet\r\n      </Typography>\r\n    </Paper>\r\n  }\r\n};\r\n\r\nexport default MyPosts;\r\n\r\ntype MyPostsType = {\r\n  isOwner: boolean  \r\n}","import { useStyles } from './componentsStyles';\r\nimport { Button } from '@material-ui/core';\r\nimport React, { ChangeEvent } from 'react';\r\n\r\n\r\nexport const UploadButton: React.FC<UploadButtonPropsType> = ({ onChangeHandler, buttonAssign }) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    return <label htmlFor=\"upload-photo\">\r\n        <input\r\n            style={{ display: 'none' }}\r\n            id=\"upload-photo\"\r\n            name=\"upload-photo\"\r\n            type=\"file\"\r\n            onChange={onChangeHandler} />\r\n        <Button className={classes.uploadButton} component=\"span\" fullWidth>\r\n            {buttonAssign}\r\n        </Button>\r\n    </label>;\r\n};\r\n\r\nexport type UploadButtonPropsType ={\r\n    onChangeHandler: (event: ChangeEvent<HTMLInputElement>) => void\r\n    buttonAssign: string\r\n}\r\n","import React, { ChangeEvent } from 'react'\r\nimport Loader from '../commonElements/loader/loader';\r\nimport Info from './Info/Info';\r\nimport MyPosts from './MyPosts/MyPosts';\r\nimport styles from './Profile.module.css';\r\nimport avatar from '../../assets/images/avatar.png';\r\nimport { UploadButton } from \"../commonElements/UploadButton\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getIsProfileFetching, getUserProfile, getUserStatus } from '../../redux/selectors/profileSelectors';\r\nimport { saveUserPhoto, updateStatus } from '../../redux/profile-reducer';\r\nimport { Grid, Paper } from '@material-ui/core';\r\n\r\ntype PropsType = {\r\n  isOwner: boolean\r\n}\r\n\r\n\r\nconst Profile: React.FC<PropsType> = ({ isOwner }) => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const userProfile = useSelector(getUserProfile)\r\n  const isProfileFetching = useSelector(getIsProfileFetching)\r\n  const userStatus = useSelector(getUserStatus)\r\n\r\n  const updateUserStatus = (status: string | null) => {\r\n    dispatch(updateStatus(status))\r\n  }\r\n\r\n  const savePhoto = (photo: File) => {\r\n    dispatch(saveUserPhoto(photo))\r\n  }\r\n  const selectedMainPhotoFile = (event: ChangeEvent<HTMLInputElement>) => {\r\n    if (event.target.files?.length) {\r\n      savePhoto(event.target.files[0])\r\n    }\r\n  }\r\n\r\n  if (!userProfile) {\r\n    return (<Loader />)\r\n  }\r\n\r\n  return (\r\n\r\n    <Grid container direction=\"column\">\r\n      <Paper square={true}>\r\n        <Grid item container direction=\"row\">\r\n          <Grid item container direction=\"column\" spacing={2} justify=\"flex-start\" alignContent=\"center\" xs={12} md={5}\r\n            style={{ marginTop: \"1rem\" }}>\r\n            <Grid item >\r\n              {!isProfileFetching\r\n                ? <img className={styles.img} src={userProfile.photos?.large !== null ? userProfile.photos?.large : avatar} alt=\"profile\"></img>\r\n                : <Loader />}\r\n            </Grid>\r\n            <Grid item>\r\n              {isOwner && <UploadButton onChangeHandler={selectedMainPhotoFile} buttonAssign=\"Upload Profile Photo\" />}\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={12} md={7}>\r\n            <Info\r\n              userProfile={userProfile}\r\n              userStatus={userStatus}\r\n              updateStatus={updateUserStatus}\r\n              isOwner={isOwner}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Paper>\r\n      <Grid item container style={{ marginTop: 20 }}>\r\n        <MyPosts isOwner={isOwner} />\r\n      </Grid>\r\n    </Grid>\r\n    \r\n  );\r\n}\r\n\r\nexport default Profile;","import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector} from 'react-redux'\r\nimport {useParams} from 'react-router-dom'\r\nimport withAuthRedirect from '../../HightOrderComponent(hoc)/withAuthRedirect'\r\nimport {\r\n    setUserProfile,\r\n    setStatus,\r\n} from '../../redux/profile-reducer'\r\nimport Profile from './Profile'\r\nimport Loader from '../commonElements/loader/loader'\r\nimport { getAuthUserData, getIsProfileFetching } from '../../redux/selectors/profileSelectors' \r\n\r\nconst ProfileContainer: React.FC = React.memo(() => {\r\n  \r\n  const dispatch = useDispatch()\r\n\r\n  //get data from profile reducer\r\n  const authorizedUserId = useSelector(getAuthUserData)\r\n  const isProfileFetching = useSelector(getIsProfileFetching)\r\n\r\n  \r\n  const setProfile = (userId: number | null) => {\r\n    dispatch(setUserProfile(userId))\r\n  }\r\n  const setUserStatus = (userId: number | null) => {\r\n    dispatch(setStatus(userId))\r\n  }\r\n  \r\n  //function for set or refresh user profile\r\n  const refreshProfile = (id: string) => {\r\n    let userId: number | null = parseInt(id)\r\n    if(!userId && authorizedUserId != null){\r\n      userId = authorizedUserId.id\r\n    }\r\n    setProfile(userId)\r\n    setUserStatus(userId)\r\n  }\r\n\r\n  //get params (userId) from URL\r\n  let {userId}: {userId: string} = useParams()\r\n  \r\n  //refresh user profile\r\n  useEffect(() => {\r\n    refreshProfile(userId)\r\n  }, [userId])\r\n  \r\n    return (\r\n      <div>\r\n        {isProfileFetching\r\n          ?<Loader/>\r\n          :<Profile isOwner={!userId} />\r\n        }\r\n      </div>\r\n        )\r\n}\r\n)\r\n\r\n//This is a HOC what verify does user authorised, if not redirect to \"/login\"\r\nexport default  withAuthRedirect(ProfileContainer) as React.ComponentType;","import './App.css';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport News from './components/News/News';\r\nimport Music from './components/Music/Music';\r\nimport Settings from './components/Settings/Settings';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport Header from './components/Header/Header';\r\nimport Login from './components/Login/Login';\r\nimport React, { lazy } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { initialized } from './redux/app-reducer';\r\nimport Loader from './components/commonElements/loader/loader';\r\nimport { Suspense } from 'react';\r\nimport { AppStateType } from './redux/redux-store';\r\nimport ProfileContainer from './components/Profile/ProfileContainer';\r\nimport { Grid } from '@material-ui/core';\r\n\r\n\r\n//use React.lazy for code-splitting\r\nconst DialogsContainer = lazy(() => import('./components/Dialogs/Dialogs'));\r\nconst UsersPage = lazy(() => import('./components/Users/Users'));\r\nconst ChatPage = lazy(() => import('./components/ChatPage/ChatPage'))\r\n\r\nclass App extends React.Component<AppPropsType> {\r\n\r\n  componentDidMount = () => {\r\n    this.props.initialized();\r\n  }\r\n\r\n  render = () => {\r\n    if (!this.props.initialized) {\r\n      return <Loader />\r\n    }\r\n\r\n    return (\r\n    <Grid container direction=\"column\" spacing={2}>\r\n        <Grid item xs={12}>\r\n          <Header />\r\n        </Grid>\r\n        <Grid item container direction=\"row\" spacing={2}>\r\n          <Grid item sm={1}/>\r\n          <Grid item xs={12} sm={2}>\r\n            <Navbar />\r\n          </Grid>\r\n          <Grid item sm={8}>\r\n            <Suspense fallback={<Loader />}>\r\n              <Switch>\r\n                <Route exact path=\"/\" render={() => <Redirect to=\"/profile\" />} />\r\n                <Route path=\"/login\" render={() => <Login />} />\r\n                <Route path=\"/users\" render={() => <UsersPage />} />\r\n                <Route path=\"/dialogs\" render={() => <DialogsContainer />} />\r\n                <Route path=\"/profile/:userId?\" render={() => <ProfileContainer />} />\r\n                <Route path=\"/news\" component={News} />\r\n                <Route path=\"/music\" component={Music} />\r\n                <Route path=\"/settings\" component={Settings} />\r\n                <Route path=\"/chat\" render={() => <ChatPage/>} />\r\n                <Route path=\"*\" render={() => <div>404 NOT FOUND</div>} />\r\n              </Switch>\r\n            </Suspense>\r\n          </Grid>\r\n          <Grid item sm={1}/>\r\n        </Grid>\r\n      </Grid>)\r\n  };\r\n}\r\n\r\nlet mapDispatchToProps = (state: AppStateType) => {\r\n  return {\r\n    initialized: state.app.initialized\r\n  }\r\n}\r\n\r\nconst connector = connect(mapDispatchToProps, { initialized })\r\n\r\nexport default connector(App);\r\n\r\ntype AppPropsType = ConnectedProps<typeof connector>","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import store from './redux/redux-store';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './App.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { HashRouter} from 'react-router-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <HashRouter>\r\n            <Provider store={store}>        \r\n                <App />\r\n            </Provider>\r\n        </HashRouter>\r\n    </React.StrictMode>,\r\ndocument.getElementById('root')\r\n);\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__slPY0\",\"item\":\"Navbar_item__dgERQ\",\"activeLink\":\"Navbar_activeLink__8SB2B\",\"friendsItems\":\"Navbar_friendsItems__2YQVu\",\"friends\":\"Navbar_friends___ubY9\"};","\r\n\r\nexport const required = (value: string) => (value ? undefined : 'Required')\r\n\r\n//validator to set max length in Field\r\nexport const maxLengthCreator = (maxLength: number) => (value: string) => (value && value.length > maxLength \r\n    ? `Max length is ${maxLength} symbols`\r\n    : undefined )\r\n\r\n    //Function compose all validators from final-form\r\nexport const composeValidators = (...validators: Array<Function>) => (value: string) => \r\n        validators.reduce((error, validator) => error || validator(value), undefined);\r\n\r\n\r\nexport const checkError = (error: Array<string>, value: string) => {\r\n    const newValue = value[0].toUpperCase() + value.slice(1);\r\n    return( error && error.map(messages => {\r\n            if(messages.indexOf(newValue) >= 0){\r\n                return messages;\r\n            }\r\n            return undefined;\r\n        }))\r\n    }\r\n\r\n","import { useStyles } from './componentsStyles';\r\nimport { TextField } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { FieldRenderProps } from \"react-final-form\";\r\n\r\n\r\n\r\nexport const InputCustom: React.FC<FieldRenderProps<any>> = (props) => {\r\n\r\n    const classes = useStyles();\r\n    const { input, meta, children, ...restProps } = props;\r\n    return (\r\n        <TextField\r\n            className={classes.textField}\r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            label={input.name}\r\n            size=\"small\"\r\n            error={meta.error && meta.touched}\r\n            helperText={meta.touched ? meta.error : undefined}\r\n            {...input}\r\n            {...restProps} />\r\n    );\r\n};\r\n","import { makeStyles } from \"@material-ui/core\";\r\n\r\n\r\n\r\nexport const useStyles = makeStyles({\r\n    textField:{\r\n        width: '100%',\r\n    },\r\n    loginButton:{\r\n        background: 'linear-gradient(45deg, gray, #2d2d2d)',\r\n        color: 'white !important',\r\n        height: '2.5rem'\r\n    },\r\n    logoutButton:{\r\n        width: '10rem',\r\n        background: 'white',\r\n        color: 'black'\r\n    },\r\n\r\n    uploadButton: {\r\n        background: 'linear-gradient(45deg, gray, #2d2d2d)',\r\n        color: 'white',\r\n        width: '163% !important',\r\n        height: '2.5rem'\r\n    }\r\n    \r\n})\r\n\r\n","export default __webpack_public_path__ + \"static/media/Spinner.7593a230.svg\";","import styles from './Loader.module.css'\r\nimport loader from '../../../assets/images/Spinner.svg'\r\nimport React from 'react'\r\n\r\nlet Loader: React.FC = () => {\r\n    return(\r\n        <div className={styles.loader}>\r\n            <img src={loader} alt=\"loader\" />\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default Loader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"Info_info__2qP2I\",\"job\":\"Info_job__1li1e\",\"error\":\"Info_error__2N64K\",\"editMode\":\"Info_editMode__32hPv\",\"editModeForm\":\"Info_editModeForm__1e2fL\"};","import { useStyles } from './componentsStyles';\r\nimport { Button } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\n\r\nexport const CustomButton: React.FC<PropsType> = ({ children, disabled }) => {\r\n\r\n    const classes = useStyles();\r\n    return <Button className={classes.loginButton} type=\"submit\" disabled={disabled} fullWidth>{children}</Button>;\r\n};\r\n\r\ntype PropsType = {\r\n    children: string\r\n    disabled?: boolean\r\n} ","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__1oqx-\",\"postInfo\":\"Post_postInfo__3ZaLI\",\"name\":\"Post_name__2LXem\",\"message\":\"Post_message__2SCuw\"};","import { UsersType } from './users-reducer';\r\nimport { InferActionsType } from './../types/types';\r\n\r\n\r\nlet initialState = {\r\n    friendsItems: [\r\n] as Array<UsersType>\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\nconst friendsItemsReducer = (state = initialState, action: FriendItemsActionsType):InitialStateType => {\r\n    \r\n        switch (action.type){\r\n            case 'app/friendsItems-reducer/ADD-FOLLOWING-USER':\r\n                return {\r\n                    ...state,\r\n                    friendsItems: [...state.friendsItems, action.user]\r\n                }\r\n            case 'app/friendsItems-reducer/REMOVE-USER':\r\n                return {\r\n                    ...state,\r\n                    friendsItems: state.friendsItems.filter((friend) => friend.id !== action.id)\r\n                }\r\n\r\n            default: \r\n                return state\r\n        }\r\n    \r\n}\r\n\r\nexport type FriendItemsActionsType = InferActionsType<typeof friendsItemsActions>\r\n\r\nexport const friendsItemsActions = {\r\n    addFollowingUser: (user: UsersType) => ({type: 'app/friendsItems-reducer/ADD-FOLLOWING-USER', user} as const),\r\n    removeUserFromFriendsItems: (id: number) => ({type: 'app/friendsItems-reducer/REMOVE-USER', id} as const)\r\n}\r\n\r\nexport default friendsItemsReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerText\":\"Header_headerText__11jLN\",\"logo\":\"Header_logo__2IV0K\",\"headerUserData\":\"Header_headerUserData__3baIP\"};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAgMAAACJFjxpAAAADFBMVEUAAAAAAAAAAAAAAAA16TeWAAAAA3RSTlM8AMhCuJKoAAAObklEQVR42u2dvXLbSBLHx65yshvjJc4BH4GuDY8BXcQHAwR6BDwC7brSIzDfcEsb+BGQHB9B+TJQlcsZA1YJPoo4n2XLsjDd/e/pGdh7hUklgD/0x79nBoMZV/7g5iaACWACmAAmgAlgApgAJoAJYAKYACaACWACmAAmgAlgApgAJoAJYAL4OwO8+uXqqu+vrn5/9kMA3J/9Q/vgRgd49a7/rn18Ni7AL/2g/T4iQPGy97T32VgAxbve2z5m4wBQvx9GoAcoZj3ZbrMRAJjf/0SQHmDRs22fGuC3XmiXaQGKVgI4Z0kBZr3YblMCLHqg7dMByA7QO8FFdoDaCRqAVQ+2y0QA84H0XrlP7Wogzac0AE8j8I+HLsCrf4THoQuNwPcvHv/x9cvQOHRhBji/efrn522YCVyQAT6+GP7D6zbIBC7EAP6q+10/YR8b4LEBqH7HYwLYBE5vAPrejyn3cQEe3frMyMyqVZsABKi/PdpbsLtwExXgmwj+xf/jr1o5xABWsGUf+eoyIsAMv+tKWRQhgEIT29/yJYsGsNCE9jcn7KMBtCq35g+4sQByZVfnIWJ2kQBmyp7OQxx2cQAKdV9vpghDp1DBLQpQKdTQ4SrYlXBrcDV0+ONscYAVfo2DRUDV25/BUuBgD6iGvSvYBw71gHLMOUN94FAP7HQAOeoDB3rgXCpbC/rAgR5QT70sQC1yoAqpp78KUIsc5oGuVLcGC16HPcdOD5BjtnOQB85lQGshHzjIjvsQgAXkPQc9xTYEoIKs5xBFPZVBbY5oOA+w5N3orj43xwfQwQAw5wL59cNLow8vuBQ6hQMUXCo/Goj257dcRcqCAXLGA6tWnpmrARFxQBJm8pSVf9BeAIno5CS85UeLXH9hLgeBkxPZ54F/YnPUtSwjTtbhTHYA+X+yGjsxBE7SnCE3DpqLQeDEENiDBvBaeiGqsRNDYAsawCt5KzEInBQCZ264LkdBKwWBk0KgY4brQCI0UhA4KQR2gAYwMxK5pAROKgQZM2MEvCoppHLghEJwYictgTCcC+XACX2Bg8IDXh8shT6BE/oCO40HfPkmBYHjQ8AzL5frXlp+Ea1MDVBRNa7hAE6Ux7ZqgJpSEP7taYbfSABoCPCKf2e5Iy7o1AAtEdU1D3Ag7nTSAhSUSxse4ESlU6YEyNnnUQXBkpUiflChVAH/JTk/uGFjUKkC/h8q2Ch0XAyeyMEa3ToiCE46gIIKgUZcP0FBZyqAnAoceRFHht+MAagJGRJjsO+vCSm6UQE0bAdHGYX3ZutUAHPikloGoALnpAEoqGdZygB3FHamAKiosJkDy4gox20VADXfzdemQcGkgaP7g+cyJAm8T9rS/UI/wIaIwQoB2BFR2CkAWiIGcwTgOLzugh6iOjoJdsSNAvIwp9PAC7Cm/n+JANxRT3QNA9SUxRoE4KTwKQGw5Cc8pEaRH2CADfXv0IJG0nd3MEBLxCAkA14hyMk0cGQSbANlwItekWngyEpQBsqAP9jIauCoJDiFAxyp8L0BAcgkqDGAgyYNHPXPN2WgDjHsHQgwp4pngwHcUd47gQAtFTAgwIkK7DMGUFBJAAqhP99bIg8dUYpOBgAa/hoCIOMFVGK/4FCR7YhY9+VyiS7t9sXPBZGHjmDdlcGlwA+QE3Z1hLe2FoBrKg1OEAAVr2gtYsx3RgAKMpPWFgDquZz/Oe/K8FpE9L02fs86/88c4gMs/bZxfhm4MQEcyZ7uDQCwJL1YmwAIyzq/DGxNAAdyxN0BAHNyEGMDKPxC4Lzp4h/GXZgAiBs7EDQCgN+0DnSVCqCjJ762IgAtA2iXkALwp5fDZcAK4L+z89p5lwIg90qEw2XACuCPLuetGVkKgMJb5ZwvWc5lCoDPQnASAVp6VtUK4H0257MTcQOjDtyHVyYAVMyrZqMS3ltwKwCsman92ghQ+zqszpesuzQA3ns7349sjQDHkhaCGwFgybxfsvUJvwT4QQBoqMFlBIDSlyHOI4TUwqe1FaD1SKHziAX1jtE0MqJu7jyQXSqAxmNe53HTwQpwXTJKxAMUTBbZRscPUpqxABUXQ6b5AUpkHC6EdoDcYx4fAHV9aQVYex7P4UqMA2QlrsUOV2LbLBmlxR4AegWoFeDzDXiAJj1AxwJs2JVvKAB5g/mwGLjhf3Ts9SaAZvh8TnRSpMlqKsQcXgrGACj4RcBmgHoYoiqATXKAil8BCwLQaeRRejcU62s2iE0Anvs7RS2yA3gs7CQfRQXwxNhPBnDBf41gBvgsdEcGYBkF4I4HOAgAp5QAcwGg4S9fmgE2g2LnhL9HBhg+oVNU40gAJwHgYAYQHoEDaMcAOAsAx5QAFwIAX40jANSDHpsbKOUuZRDmA61XATSpASq+OxChFqwH9X4IsC3Tdck8v+B4vsidUo+NhwBZmW5odh9lNEAuAFjnB3xhrgEokgPU7MDOPkvmk7oBwDkCwI4Po2CAdXKAC15FzJPVXzL5SAIsxwE4/NwAdxEAjrya0wDNOAAdC9ClBWh+boBNJIAbxcDAsRESH2D5cwPMxwE4hQKsRwE4pi1GFxaA6v8foOX9F6NHNOhyaAAi9An/5gDmt2ZmgHYMgN3PDGB+Z3Qv58kBzskAzC8srABNagBBRiPMEd2X9NQAXTKAix8NYPjUKw5Abu6VjwNwkwxgbe6PGAGq1ACSEBXm7oBRCUtzMbQCtNZiaAWYW4uhFWBjrUUAALuvaWOtRcY+IVaNuoQAtbUUWAFyqxJbASqrEH4G4AenLEBhFULb6LgM3YckIsDcqENmgMaoQwAAv7fu0igDwhzRRgSojTJgmyfE+kQ7IwBvwcKYhbbJaiwPs7QAjS0J7ABLWxIIb0yWUjUH0uBgBTilBZgnBzhaAC5kgNzUG5BeXNZiLTEDmN4dQ1K4swL0/A0qIwD/+j6PAHAtAwSvoICKwVa+nAZYjwNwzQNsbdUokz1IA1QRAIAQ2vIA17KSBHdJpaVcBZBHGxOAcTUd0CE4mQBKQEsbw9hcXNAoDw7FHkknAxjWlALzxQf5ag5AHplIHYKjbD9pXXFnqsdABHEA8sBAqsdADnFLuxs5jitTMZQWtwOdwsJSi8Tl/UtZy9T7lg8u5gAuzADAxUcGAOiT8dVIojd+ZSNrMRJAHEAOxNHSoMTih05rIJNqgxKLn3pVgJbkBiUWP3YrADVdG5TY+r2hLIU7I4D0kYkohUAA89+cAgCsEmVWAKAec0ok6ZD82e9GFhMOALmU//C5AR5jE6xDwKffS9COBgD+4/cLMJLChNC3w4VqAwQRAJEQfgOEHCgGF8E6BGwBsUblLKhHCGyCUaGCHiSEwDYgBVDS6mAh9IW4ZisYMwCwFQy7GY7YIUAURNoMZ26ZrT0DSixtB7SxzNaeACGUNkRq5I55OIBPrTWbYokAd4ASS5ti1bKeBAN4N13TbIwm9kqR9JE2RlvLUhgMAG0NV8lKFAwAbY5XyDcKBoC2B+Q2SLQCzHtgg0Rui0grgPfZNJtkGgHATTKXYl0PBfDHt2ajVCMAuFFqLQpBKAC4VWwuCkFuWD4CbJZbiXcKrQXgdsEFtCQwpBzPvfml2TJa7BOeM0kGgC2jmU2zv5iImR94L8kAsml2IwjBjJsh2QsygGwbvuSFYMFPVr/lQwfZOJ0Xgt+kpWwvdDKg2jy/HBw27mkfM5UMqI4P+BRI7+SVVO+5iZUtAFAwQ4wZsqJyz0yuZQAAfYSEFIBf2yWZhdAREvQhGivwQyuvHikO0aCOESnQT828p8ArjhFZEmkw6+G2J+YGsINUiKNkFr2iXfrtih0l4z9M53WrARiGwZwY86HHCRWzXtVu0dxCD1T6tVe2vScJwAOVfEdKrXp1uxwmAXqkVDPovhatHuD7oqA6VGt4rNisD2h/8Q/FAAzMteiD2lverTTA06PlQhzwNBdbSt+Rw/VmfWC7ffJMGQjw5HjBRR/c9t95FT5e8PuD6FZtOMBDLpLH5QFHTM4Mv9/fZp5HkgEeH7K56E1t/8ip+CGbj44Zfd3aAO6doD1m9NFBqzPj79/novag1XuLHe0O+OqEmu7oOnok3YVL0FMnqA/b/Xrc8CzC7//PCS092HHMFEC26qO0vf7A5Xvl/HcbB6D/F/NKjTt0+z991JYpAODNHhRNdew4utWBpukOXq/jA+iOns/jA1yrAIr4AJkKIH4UUnOIrhwpCjslQD1SDJIA0aNwpwQoRopBEiB2FJLz2K4cJwo7NUA9TgzSAFVcgK0aAN5+CesVlXqA+SgxyAAsYwIcAgDyMWSIAyjGkCEOIGYQMK/TXDlGEByCAOoRZIgFqEaQIRYgnhRx70Gd9LI3aSUSAOoRQoAFKNKrAA8QSwnYl+pOXHKQVAUEgDx1IZAAivQhwAPECQJ+XQUPsIgBsDcAVIl1WASIocbCElkBoEmrwzJAnjgJRYAicRKKAPa50tvSBlCnrIQIQJHYAyKAVQyl1d4ywCKtB2SAKqUMIgA2H4geAAAWST0AABQpcwABsGjRbRkDoE7pAQSgSOkBBCC8JndlHIDgl2eXkQBC+0WnMhZAoBTsowEUyUIQBAgLw66MB7BKFYIoQIga3pYxAQJ6x7uoAPqFBOcsKoA+E/dlXACtCVADwABaE6AGwAF0JoANgAPoTAAbQAGgMQFuAAWAxgS4ATQAuBzelmkAVnGrgB4ANYHGADoALA4VEagFwOJwX6YDQJxwW6YEkJ2gc4AaQM6EyzItgBQG+zI1QPmS+/33ZXoALhBvyzEA6M+tPmajAJQF4YX3Ab8fBEAQBP1+GEBZPh/owflN2J0CAcrXf37/+x9elOMClOWrRwgfngXfJhzgkxWeX131/dXVmxeGm1gAorQJYAKYACaACWACmAAmgAlgApgAJoAJYAKYACaACWACmAAmgAlgApgAfjjAfwHrOsdxeJHingAAAABJRU5ErkJggg==\"","import { AppStateType } from \"../redux-store\";\r\n\r\nexport const getUsers = (state: AppStateType) =>\r\n    state.usersPage.users\r\n\r\nexport const getPageSize = (state: AppStateType) =>\r\n    state.usersPage.pageSize\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) =>\r\n    state.usersPage.totalUsersCount\r\n\r\nexport const getCurrentPage = (state: AppStateType) =>\r\n    state.usersPage.currentPage\r\n\r\nexport const getIsFetching = (state: AppStateType) => \r\n    state.usersPage.isFetching\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) =>\r\n    state.usersPage.followingInProgress\r\n\r\nexport const getIsAuth = (state: AppStateType) =>\r\n    state.authorization.isAuth\r\n\r\nexport const getFilter = (state: AppStateType) =>\r\n    state.usersPage.filter","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"Login_error__2s83K\",\"loginForm\":\"Login_loginForm__1sbSj\",\"email\":\"Login_email__1nHbB\"};","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect} from 'react-redux';\r\nimport { AppStateType } from '../redux/redux-store';\r\n\r\n//state for HOC withAuthRedirect\r\nlet mapStateToPropsForRedirect = (state: AppStateType) =>{\r\n    return {\r\n        isAuth: state.authorization.isAuth\r\n    }\r\n}\r\n\r\ntype MSTPtype = {\r\n    isAuth: boolean\r\n}\r\n\r\n\r\nconst withAuthRedirect = <P extends object>(Component: React.ComponentType<P>) => {\r\n\r\n    class RedirectComponent extends React.Component<MSTPtype>{\r\n        render(){\r\n            const {isAuth, ...props} = this.props\r\n            return !isAuth ? <Redirect to=\"/login\"/>: <Component {...props as P} />\r\n        }\r\n    }\r\n    \r\n    const ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n    //return component already with redirect\r\n    return ConnectedAuthRedirectComponent;\r\n}\r\n\r\nexport default withAuthRedirect;","import { InferActionsType, ThunkType } from \"../types/types\";\r\n\r\nconst ADD_MESSAGE = 'ADD-MESSAGE';\r\n\r\ntype DialogType={\r\n    id: number\r\n    name: string\r\n}\r\ntype MessageType={\r\n    id: number\r\n    message: string\r\n}\r\n\r\nconst initialState = {\r\n    messageData:[\r\n        {id: 1, message: \"Hello World\"},\r\n        {id: 2, message: \"Here will be message section soon :-)\"}\r\n    ] as Array<MessageType> , \r\n    dialogData: [\r\n        {id: 1, name: \"User1\"},\r\n        {id: 2, name: \"User2\"},\r\n        {id: 3, name: \"User3\"},\r\n        {id: 4, name: \"User4\"},\r\n        {id: 5, name: \"User5\"},\r\n        {id: 6, name: \"User6\"},\r\n        {id: 7, name: \"User7\"}\r\n    ] as Array<DialogType>,\r\n    newMessageText: \"\" as string\r\n};\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\n\r\n\r\nconst dialogsReducer = (state = initialState, action: DialogActionCreatorsType):InitialStateType  => {\r\n\r\n    switch (action.type) {\r\n        case ADD_MESSAGE:\r\n            let newMessageObj = {\r\n                id: 5,\r\n                message: action.message,\r\n            };\r\n            return {\r\n                ...state,\r\n                messageData: [...state.messageData, newMessageObj], //append newMessage into messageData array\r\n                newMessageText: \"\"\r\n            };\r\n            \r\n        default:\r\n            return state;\r\n            \r\n    }\r\n};\r\n\r\n\r\n// action creators\r\ntype DialogActionCreatorsType = InferActionsType<typeof dialogsActionCreators>\r\n\r\nconst dialogsActionCreators ={\r\n    addMessageActionCreator: (message: string) => ({type: ADD_MESSAGE, message})\r\n} \r\n\r\n//thunk creator\r\n\r\ntype DialogThunksType = ThunkType<DialogActionCreatorsType>\r\n\r\nexport const addMessage = (message: string): DialogThunksType => {\r\n    return (dispatch)=> dispatch(dialogsActionCreators.addMessageActionCreator(message))\r\n};\r\n\r\n\r\nexport default dialogsReducer;","import { FilterType, UsersType } from './../redux/users-reducer';\r\nimport { instance, ResultCode } from './api';\r\n\r\nexport const usersAPI = {\r\n    // Get Array of users from server for current page\r\n    getUsers(currentPage = 1, pageSize = 10, filter: FilterType = {term: \"\", friend: null}) {\r\n        return (instance.get<GetUsersResponseType>(`users?page=${currentPage}&count=${pageSize}&term=${filter.term}` + \r\n            (filter.friend === null ? '' : `&friend=${filter.friend}`))\r\n            .then(response => response.data)\r\n        );\r\n    },\r\n\r\n\r\n    followUser(userId: number) {\r\n        return (\r\n            instance.post<FollowedUserResponseType>(`follow/${userId}`)\r\n                .then(response => response.data)\r\n        );\r\n\r\n    },\r\n    unfollowUser(userId: number) {\r\n        return (\r\n            instance.delete<FollowedUserResponseType>(`follow/${userId}`)\r\n                .then(response => response.data)\r\n        );\r\n    }\r\n};\r\n\r\nexport type GetUsersResponseType = {\r\n    items: Array<UsersType>\r\n\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n\r\nexport type FollowedUserResponseType = {\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n    data: any\r\n}\r\n","import { ResultCode } from \"../api/api\";\r\nimport {usersAPI} from \"../api/usersAPI\";\r\nimport { PhotosType, InferActionsType, ThunkType } from \"../types/types\";\r\nimport { friendsItemsActions, FriendItemsActionsType } from \"./friendItems-reducer\";\r\n\r\n//Initial State\r\n\r\nexport type UsersType = {\r\n    id: number\r\n    name: string\r\n    status: string\r\n    photos: PhotosType\r\n    followed: boolean\r\n}\r\n\r\nlet initialState = {\r\n    users:[] as Array<UsersType>,\r\n    pageSize: 12,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    isFollow: false,\r\n    followingInProgress: [] as Array<number>, // array of users id`s\r\n    filter: {\r\n        term: \"\",\r\n        friend: null as boolean | null\r\n    }\r\n};\r\n\r\n\r\n\r\n//Reducer\r\n\r\nconst usersReducer = (state = initialState, action: UserReducerActionsTypes):initialStateType => {\r\n\r\n    switch (action.type) {\r\n        //change following of user\r\n        case 'app/users-reducer/TOGGLE_FOLLOWING':\r\n            return {\r\n                ...state,\r\n                users: state.users.map( u => {\r\n                    if (u.id === action.userId){\r\n                        return {...u, followed: action.userFollowed }\r\n                    }\r\n                        \r\n                    return u;\r\n                })\r\n            };\r\n        \r\n        //set users for current page\r\n        case 'app/users-reducer/SET-USERS':\r\n            return {...state, users: action.users};\r\n        \r\n        //set filter options\r\n        case 'app/users-reducer/SET-FILTER':\r\n            return {...state, filter: action.payload.filter}\r\n\r\n        //set current page of users\r\n        case 'app/users-reducer/SELECT-PAGE':\r\n            return {...state, currentPage: action.currentPage};\r\n        \r\n        //set total amount of users\r\n        case 'app/users-reducer/SET-TOTAL-COUNT':\r\n            return {...state, totalUsersCount: action.totalCount};\r\n\r\n        case 'app/users-reducer/TOGGLE_IS_FETCHING':\r\n            return{...state, isFetching: action.isFetching};\r\n\r\n        case 'app/users-reducer/TOGGLE_IS_FOLLOW_FETCHING':\r\n            return{...state, \r\n                followingInProgress: action.isFetching \r\n                ? [...state.followingInProgress, action.userId] //disable only button of user what we follow/unfollow during server request\r\n                : state.followingInProgress.filter(id => id !== action.userId) //delete user id from array\r\n            }\r\n        default:\r\n            return state;\r\n            \r\n    }\r\n};\r\n\r\n\r\n//action creators\r\ntype UserReducerActionsTypes = InferActionsType<typeof userReducerActionsCreators>\r\n\r\nexport const userReducerActionsCreators = {\r\n    setUsers: (users: Array<UsersType>)  => ({ type: 'app/users-reducer/SET-USERS', users} as const),\r\n    selectPage: (currentPage: number)  => ({ type: 'app/users-reducer/SELECT-PAGE', currentPage} as const),\r\n    setFilter: (filter: FilterType)  => \r\n        ({ type: 'app/users-reducer/SET-FILTER', payload: {filter}} as const),\r\n    setTotalCount: (totalCount: number) => ({ type: 'app/users-reducer/SET-TOTAL-COUNT', totalCount} as const),\r\n    toggleIsFetching: (isFetching: boolean)  => ({ type: 'app/users-reducer/TOGGLE_IS_FETCHING', isFetching} as const),\r\n    toggleIsFollowFetching: (isFetching: boolean, userId: number) => \r\n        ({ type: 'app/users-reducer/TOGGLE_IS_FOLLOW_FETCHING', isFetching, userId} as const),\r\n    toggleFollowing: (userId:number, userFollowed: boolean) => \r\n        ({type: 'app/users-reducer/TOGGLE_FOLLOWING', userId, userFollowed} as const)\r\n}\r\n\r\n\r\n//thunk creators\r\n\r\n\r\n\r\nexport const getUsersWithFilter = (currentPage: number, pageSize: number, filter: FilterType = {term: \"\", friend: null}): UserReducerThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(userReducerActionsCreators.toggleIsFetching(true));\r\n        dispatch(userReducerActionsCreators.setFilter(filter))\r\n        const data = await usersAPI.getUsers(currentPage, pageSize, filter);\r\n        dispatch(userReducerActionsCreators.toggleIsFetching(false));\r\n        dispatch(userReducerActionsCreators.setUsers(data.items));\r\n        dispatch(userReducerActionsCreators.setTotalCount(data.totalCount));\r\n    };\r\n};\r\n\r\nexport const handlePageChange = (pageNumber:number, pageSize: number, filter: FilterType): UserReducerThunkType => async (dispatch) =>\r\n{\r\n    dispatch(userReducerActionsCreators.selectPage(pageNumber));\r\n    dispatch(userReducerActionsCreators.toggleIsFetching(true));\r\n    //getUsers function what get users from server\r\n    const data = await usersAPI.getUsers(pageNumber, pageSize, filter);\r\n    dispatch(userReducerActionsCreators.toggleIsFetching(false));\r\n    dispatch(userReducerActionsCreators.setUsers(data.items));    \r\n}\r\n\r\n\r\nexport const toggleFollowingUser = (userId: number, userFollowed: boolean): UserReducerThunkType => {\r\n    return async (dispatch, getState) => {\r\n        dispatch(userReducerActionsCreators.toggleIsFollowFetching(true, userId));\r\n        if (userFollowed === false){\r\n            let data = await usersAPI.followUser(userId);\r\n            if (data.resultCode === ResultCode.success) {\r\n                let state = getState()\r\n                const user = state.usersPage.users.filter(item => item.id === userId)[0]\r\n                dispatch(userReducerActionsCreators.toggleFollowing(userId, true))\r\n                dispatch(friendsItemsActions.addFollowingUser(user))\r\n            }\r\n        };\r\n        if (userFollowed === true){\r\n            let data = await usersAPI.unfollowUser(userId);\r\n            if (data.resultCode === ResultCode.success) {\r\n                dispatch(userReducerActionsCreators.toggleFollowing(userId, false))\r\n                dispatch(friendsItemsActions.removeUserFromFriendsItems(userId))\r\n            }\r\n        };\r\n        \r\n        dispatch(userReducerActionsCreators.toggleIsFollowFetching(false, userId));\r\n    }\r\n\r\n}\r\n\r\nexport default usersReducer;\r\n\r\nexport type initialStateType = typeof initialState\r\ntype UserReducerThunkType = ThunkType<UserReducerActionsTypes | FriendItemsActionsType>\r\nexport type FilterType = typeof initialState.filter","\r\n\r\nlet subscribers: SubscribersType  = {\r\n    'message-received': [],\r\n    'status-changed': []\r\n} \r\n\r\n//creat web socket chanel \r\nlet wsChanel: WebSocket | null = null\r\n\r\n//handlers for wsChanel event listeners\r\n\r\n//reconnect function, if chanel will close try to reconect every 3 sec\r\nconst closeHandler = () => {\r\n    console.log('WS closed')\r\n    setTimeout(createWsChanel, 3000)\r\n}\r\n\r\n//handle for ws message event listener\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const messages = JSON.parse(e.data)\r\n    subscribers[\"message-received\"].forEach(s => s(messages))\r\n}\r\n\r\n//notify subscribers that ws chanel is open changing status to ready\r\nconst openHandler = () => {\r\n    notifySubscriberAboutStatus('ready')\r\n}\r\n\r\nconst errorHandler = () => {\r\n    notifySubscriberAboutStatus('error')\r\n}\r\n\r\n//function what remove ws chanel event listners and close ws chanel\r\nconst cleanUp = () => {\r\n    wsChanel?.removeEventListener ('close', closeHandler)\r\n    wsChanel?.removeEventListener('message', messageHandler)\r\n    wsChanel?.removeEventListener('open', openHandler)\r\n    wsChanel?.removeEventListener('error', errorHandler)\r\n    wsChanel?.close()\r\n}\r\n\r\n\r\nconst notifySubscriberAboutStatus = (status: StatusType) => {\r\n    subscribers[\"status-changed\"].forEach(s => s(status))\r\n}\r\n\r\n//create WebSocket Chanel function\r\nfunction createWsChanel () {\r\n    //remove event listener and close chanel if get new wsChanel\r\n    cleanUp()\r\n    //make new ws chanel and add event listeners\r\n    wsChanel = new WebSocket(\"wss://social-network.samuraijs.com/handlers/ChatHandler.ashx\")\r\n    notifySubscriberAboutStatus('pending')\r\n    wsChanel.addEventListener ('close', closeHandler)\r\n    wsChanel.addEventListener('message', messageHandler)\r\n    wsChanel.addEventListener('open', openHandler)\r\n    wsChanel.addEventListener('error', errorHandler)\r\n}\r\n\r\n\r\nexport const chatApi = {\r\n    //create ws chanel when chat component will render\r\n    start(){\r\n        createWsChanel()\r\n    },\r\n    //remove all event listeners, close ws chanel and clean up subscribers array when chat component un-mount\r\n    stop(){\r\n        subscribers[\"message-received\"] = []\r\n        subscribers[\"status-changed\"] = []\r\n        cleanUp()\r\n    },\r\n    subscribe(eventName: EventsNames ,callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType){\r\n        //@ts-ignore\r\n        subscribers[eventName].push(callback)\r\n        //@ts-ignore\r\n        return () => subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n    },\r\n    unsubscribe(eventName: EventsNames ,callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType){\r\n        //@ts-ignore\r\n        subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string){\r\n        wsChanel?.send(message)\r\n    }\r\n}\r\n\r\n//types\r\n\r\ntype SubscribersType = {\r\n    'message-received': MessagesReceivedSubscriberType[],\r\n    'status-changed': StatusChangedSubscriberType[]\r\n}\r\n\r\nexport type MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\nexport type StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type ChatMessageAPIType =  {\r\n    message: string\r\n    photo:  string\r\n    userId: number\r\n    userName: string\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error'\r\nexport type EventsNames = 'message-received' | 'status-changed'","import { chatApi, StatusChangedSubscriberType, StatusType } from './../api/chatAPI';\r\nimport { ChatMessageAPIType, MessagesReceivedSubscriberType } from '../api/chatAPI';\r\nimport { InferActionsType, ThunkType } from '../types/types';\r\nimport { Dispatch } from 'redux';\r\nimport { v1 } from 'uuid';\r\n\r\n\r\nexport type ChatMessageType =  {\r\n    message: string\r\n    photo:  string\r\n    userId: number\r\n    userName: string\r\n    id: string\r\n}\r\n\r\nlet initialState= {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n};\r\n\r\n\r\n//Reducer\r\nconst chatReducer = (state = initialState, action: ChatActionTypes): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'app/chat-reducer/MESSAGES-RECEIVED':\r\n            return {\r\n                ...state,\r\n                messages: [\r\n                    ...state.messages, \r\n                    ...action.payload.messages.map(m => ({...m, id: v1()})) // map comes messages and add unique id\r\n                    ].filter((m,index,array) => index >= array.length - 100) //save only last 100 messages\r\n            }\r\n        case 'app/chat-reducer/STATUS-CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload.status\r\n            }\r\n        case 'app/chat-reducer/CLEAR-MESSAGES':\r\n            return {\r\n                ...state,\r\n                messages: []\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n//Action Creators\r\ntype ChatActionTypes = InferActionsType<typeof chatActionCreators>\r\n\r\nexport const chatActionCreators = {\r\n    messagesReceived: (messages: ChatMessageAPIType[]) =>\r\n        ({ type: 'app/chat-reducer/MESSAGES-RECEIVED', payload: { messages } } as const),\r\n    statusChanged: (status: StatusType) =>\r\n        ({ type: 'app/chat-reducer/STATUS-CHANGED', payload: { status } } as const),\r\n    clearMessages: () => ({type: 'app/chat-reducer/CLEAR-MESSAGES'} as const)\r\n}\r\n\r\n\r\n//side effect, thunks\r\n\r\n//make memoization for callbacks\r\nlet _newMessageHandler: MessagesReceivedSubscriberType | null = null\r\nlet _statusChangedHandler: StatusChangedSubscriberType | null = null\r\n\r\nconst newMessageHandler = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        //if null initializing  _newMessageHandler\r\n        _newMessageHandler = (messages: ChatMessageAPIType[]) => {\r\n            dispatch(chatActionCreators.messagesReceived(messages))\r\n        }\r\n    }\r\n    return _newMessageHandler\r\n}\r\n\r\nconst statusChangedHandler = (dispatch: Dispatch) => {\r\n    if(_statusChangedHandler === null){ \r\n        //if null initializing  _statusChangedHandler\r\n        _statusChangedHandler = (status: StatusType) => {\r\n            dispatch(chatActionCreators.statusChanged(status))\r\n        }\r\n    }\r\n    return _statusChangedHandler\r\n}\r\n\r\n\r\n\r\n\r\nexport type ChatReducerThunkType = ThunkType<ChatActionTypes>\r\n\r\nexport const startMessagesListening = (): ChatReducerThunkType => async (dispatch) => {\r\n    chatApi.start()\r\n    chatApi.subscribe('message-received',newMessageHandler(dispatch))\r\n    chatApi.subscribe('status-changed',statusChangedHandler(dispatch))\r\n\r\n}\r\n\r\nexport const stopMessagesListening = (): ChatReducerThunkType => async (dispatch) => {\r\n    chatApi.unsubscribe('message-received',newMessageHandler(dispatch))\r\n    chatApi.unsubscribe('status-changed',statusChangedHandler(dispatch))\r\n    dispatch(chatActionCreators.clearMessages())\r\n    chatApi.stop()\r\n}\r\n\r\nexport const sendMessage = (message: string): void =>  {\r\n    chatApi.sendMessage(message)\r\n}\r\n\r\nexport default chatReducer;\r\n\r\n\r\ntype InitialStateType = typeof initialState","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3dyN5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileStatus\":\"ProfileStatus_profileStatus__1aoaG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Profile_content__1A_Ne\",\"profile_info\":\"Profile_profile_info__3sXB9\",\"img\":\"Profile_img__1JUDy\",\"profile_photo\":\"Profile_profile_photo__3d9IN\",\"uploadButton\":\"Profile_uploadButton__xKTjd\"};"],"sourceRoot":""}