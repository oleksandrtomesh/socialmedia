{"version":3,"sources":["components/commonElements/loader/Loader.module.css","api/api.ts","api/profileAPI.ts","api/loginApi.ts","api/headerAPI.ts","redux/auth-reducer.ts","redux/profile-reducer.ts","redux/app-reducer.ts","redux/redux-store.ts","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","redux/selectors/friendsItemsSelectors.ts","components/Navbar/Navbar.tsx","redux/selectors/authSelectors.ts","components/Header/Header.tsx","components/Login/Login.tsx","components/Profile/ProfileStatus/ProfileStatusWithHooks.tsx","components/Profile/Info/ProfileInfoEditMode.tsx","components/Profile/Info/Info.tsx","components/Profile/MyPosts/AddNewPost/AddNewPost.tsx","components/Profile/MyPosts/Post/Post.tsx","redux/selectors/profileSelectors.ts","components/Profile/MyPosts/MyPosts.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx","App.tsx","reportWebVitals.js","index.tsx","components/commonElements/formComponent.tsx","components/Navbar/Navbar.module.css","utilits/validators.ts","assets/images/Spinner.svg","components/commonElements/loader/loader.tsx","components/commonElements/formComponentCustomStyles.ts","components/Profile/Info/Info.module.css","components/Profile/MyPosts/Post/Post.module.css","redux/friendItems-reducer.ts","components/Header/Header.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Profile/Profile.module.css","assets/images/avatar.png","redux/selectors/usersSelectors.ts","components/Login/Login.module.css","components/Profile/ProfileStatus/ProfileStatus.module.css","components/Profile/MyPosts/AddNewPost/AddNewPost.module.css","HightOrderComponent(hoc)/withAuthRedirect.tsx","redux/dialogs-reducer.ts","api/usersAPI.ts","redux/users-reducer.ts"],"names":["module","exports","ResultCode","instance","axios","create","withCredentials","baseURL","headers","profileAPI","userId","get","then","res","data","status","put","resultCode","photoFile","formData","FormData","append","profile","loginApi","values","post","delete","url","headerAPI","response","initialState","isAuth","captcha","undefined","authUserProfile","authActionCreators","id","login","email","type","captchaUrl","path","userProfile","photos","authUser","dispatch","a","success","loginResponse","captchaIsRequired","messages","authReducer","state","action","postData","message","likeCounter","newPostText","userStatus","isFetching","profileActionCreators","setUserProfile","saveProfileInfo","getState","authorization","updateUserProfileResponse","profileReducer","newPostObj","newText","INITIALIZE_APP","initialized","appReducer","rootReducer","combineReducers","profilePage","dialogPage","dialogsReducer","friendsItems","friendsItemsReducer","usersPage","usersReducer","app","store","createStore","applyMiddleware","thunkMiddleware","window","News","props","Music","Settings","getFriendsItems","Navbar","useSelector","className","c","nav","item","activeClassName","activeLink","to","getAuthUserProfile","Header","useDispatch","getIsAuth","classes","useStyles","AppBar","position","Toolbar","Typography","styles","headerText","headerUserData","logo","src","small","avatar","alt","fullName","Button","onClick","LogoutButton","variant","Login","onSubmit","error","FORM_ERROR","render","handleSubmit","submitError","loginForm","name","component","InputCustom","validate","composeValidators","required","maxLengthCreator","ProfileStatusWithHooks","updateStatus","useState","editMode","setEditMode","setStatus","useEffect","profileStatus","TextField","autoFocus","onChange","event","currentTarget","value","onBlur","label","onDoubleClick","ProfileInfoEditMode","saveProfile","initialValues","editModeForm","checkError","Object","keys","contacts","map","key","ProfileInfo","isOwner","info","aboutMe","lookingForAJobDescription","contactTitle","contactValue","LoginButton","Contact","href","target","rel","Info","AddNewPost","addNewPost","Textarea","inputField","Post","postInfo","like","getUserProfile","getAuthUserData","getUserStatus","getIsProfileFetching","getPostData","MyPosts","posts","p","Profile","isProfileFetching","savePhoto","photo","updateUserPhotoResponse","saveUserPhoto","content","profile_info","profile_photo","large","uploadButton","onChangeHandler","files","length","buttonAssign","ProfileContainer","React","memo","authorizedUserId","setUserStatus","refreshProfile","parseInt","setProfile","useParams","withAuthRedirect","DialogsContainer","lazy","UsersPage","App","componentDidMount","Grid","container","direction","spacing","xs","sm","fallback","exact","Component","connector","connect","promise","Promise","all","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","input","meta","restProps","children","textField","color","size","touched","helperText","CustomButton","UploadButton","htmlFor","style","display","maxLength","validators","reduce","validator","newValue","toUpperCase","slice","indexOf","Loader","loader","makeStyles","width","marginBottom","background","friendsItemsActions","addFollowingUser","user","removeUserFromFriendsItems","filter","friend","getUsers","users","getPageSize","pageSize","getTotalUsersCount","totalUsersCount","getCurrentPage","currentPage","getIsFetching","getFollowingInProgress","followingInProgress","getFilter","mapStateToPropsForRedirect","RedirectComponent","this","ADD_MESSAGE","messageData","dialogData","newMessageText","dialogsActionCreators","addMessage","newMessageObj","usersAPI","term","isFollow","userReducerActionsCreators","payload","totalCount","userFollowed","getUsersWithFilter","items","handlePageChange","pageNumber","toggleFollowingUser","u","followed"],"mappings":"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","file":"static/js/main.cc0da440.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3dyN5\"};","import axios from 'axios';\r\n\r\n//enum for resultCode\r\n\r\nexport enum ResultCode {\r\n    success = 0,\r\n    error = 1,\r\n    captchaIsRequired = 10\r\n}\r\n\r\n// create instance for request to server\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"API-KEY\": \"94255a0f-3471-4b7b-b59d-a3f0dda8cb88\"\r\n    }\r\n});","import { PhotosType, UserProfileType } from '../types/types';\r\nimport { instance, ResultCode } from './api';\r\n\r\nexport const profileAPI = {\r\n    getUserProfile(userId: number | null) {\r\n        return (\r\n            instance.get<UserProfileType>(`profile/` + userId).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    //get user status from server\r\n    getUserStatus(userId: number | null) {\r\n        return (\r\n            instance.get<string>(`profile/status/` + userId).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    //update auth user status\r\n    updateUserStatus(status: string | null) {\r\n        return (\r\n            instance.put<ProfileApiResponseType>(`profile/status`, { status: status })\r\n                .then(res => res.data.resultCode)\r\n        );\r\n    },\r\n\r\n    updateUserPhoto(photoFile: any) {\r\n        const formData = new FormData();\r\n        formData.append('image', photoFile);\r\n        return (\r\n            instance.put<UpdateUserPhotoResponseType>(`profile/photo`, formData).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    updateUserProfile(profile: UserProfileType) {\r\n        return (\r\n            instance.put<ProfileApiResponseType>(`profile`, profile).then(res => res.data)\r\n        );\r\n    }\r\n};\r\n\r\nexport type ProfileApiResponseType = {\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n    data:any\r\n}\r\n\r\nexport type UpdateUserPhotoResponseType = {\r\n    data: {\r\n        photos: PhotosType\r\n    }\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n}","import { instance, ResultCode } from './api';\r\n\r\n\r\nexport const loginApi = {\r\n    login(values: any) {\r\n        return (\r\n            instance.post<LoginApiResponseType>(`auth/login`, values).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    logout() {\r\n        return (\r\n            instance.delete<LoginApiResponseType>(`auth/login`).then(res => res.data)\r\n        );\r\n    },\r\n\r\n    getCaptcha() {\r\n        return (\r\n            instance.get<{ url: string; }>(`security/get-captcha-url`).then(res => res.data.url)\r\n        );\r\n    }\r\n};\r\n\r\nexport type LoginApiResponseType = {\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n    data:any\r\n}","import { instance, ResultCode } from './api';\r\n\r\n\r\nexport const headerAPI = {\r\n    authUser() {\r\n        return (\r\n            instance.get<GetUserProfileResponseType>(`auth/me`)\r\n                .then(response => response.data)\r\n        );\r\n    }\r\n};\r\n\r\nexport type GetUserProfileResponseType = {\r\n    data: {\r\n        id: number\r\n        email: string\r\n        login: string\r\n    }\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n}","import { ResultCode } from '../api/api';\r\nimport { loginApi } from \"../api/loginApi\";\r\nimport { profileAPI } from \"../api/profileAPI\";\r\nimport { headerAPI } from \"../api/headerAPI\";\r\nimport { UserProfileType, PhotosType, InferActionsType, ThunkType } from '../types/types';\r\n\r\n//Initial State\r\ntype DataType = {\r\n    id: number | null\r\n    login: string | null\r\n    email: string | null\r\n}\r\n\r\nlet initialState= {\r\n    data: null as DataType | null,\r\n    isAuth: false,  //check if user login\r\n    captcha: undefined as string | undefined,  //captcha url if result code === 10\r\n    authUserProfile: null as UserProfileType | null\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n//Reducer\r\nconst authReducer = (state = initialState, action: AuthActionTypes):InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'app/auth-reducer/ADD_DATA':\r\n            return {\r\n                ...state,\r\n                data: action.data,\r\n                isAuth: action.isAuth,\r\n            };\r\n\r\n        case 'app/auth-reducer/ADD_CAPTCHA_URL':\r\n            return {\r\n                ...state,\r\n                captcha: action.path\r\n            };\r\n\r\n        case 'app/auth-reducer/AUTH_USER_PROFILE':\r\n            return{\r\n                ...state,\r\n                authUserProfile: action.userProfile\r\n            };\r\n\r\n            case 'app/auth-reducer/SAVE_PHOTO_SUCCESS': \r\n                return {\r\n                    ...state,\r\n                    authUserProfile: {...state.authUserProfile, photos: action.photos},\r\n                }\r\n            ;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n//Action Creators\r\nexport type AuthActionTypes = InferActionsType<typeof authActionCreators>\r\n\r\nexport const authActionCreators = {\r\n\r\n    addAuthUserData: (id: number | null, login: string | null, email: string | null, isAuth: boolean) => \r\n        ({type: 'app/auth-reducer/ADD_DATA', data: {id, login, email}, isAuth} as const),\r\n    addCaptchaUrl: (captchaUrl: string | undefined) => ({type: 'app/auth-reducer/ADD_CAPTCHA_URL', path: captchaUrl} as const),\r\n    addAuthUserProfile: (userProfile: UserProfileType) => ({type: 'app/auth-reducer/AUTH_USER_PROFILE', userProfile} as const),\r\n    saveAuthUserPhotoSuccess: (photos: PhotosType) => \r\n        ({type: 'app/auth-reducer/SAVE_PHOTO_SUCCESS', photos} as const)\r\n}\r\n\r\n\r\n//side effect, thunks\r\n\r\nexport type AuthReducerThunkType = ThunkType<AuthActionTypes>\r\n\r\nexport const authUser = (): AuthReducerThunkType => async (dispatch) => {\r\n        const data = await headerAPI.authUser()\r\n        if (data.resultCode === ResultCode.success) {\r\n            let {\r\n                id,\r\n                login,\r\n                email\r\n            } = data.data;\r\n            dispatch(authActionCreators.addAuthUserData(id, login, email, true));\r\n            const userProfile = await profileAPI.getUserProfile(id)\r\n            dispatch(authActionCreators.addAuthUserProfile(userProfile));\r\n        }\r\n    }\r\n\r\ntype ValuesType = {\r\n    email: string\r\n    password: string\r\n}\r\n\r\nexport const login = (values: ValuesType):AuthReducerThunkType => {\r\n    return async (dispatch) => {\r\n        const loginResponse = await loginApi.login(values);\r\n        if (loginResponse.resultCode === ResultCode.success) {\r\n            dispatch(authUser());\r\n            dispatch(authActionCreators.addCaptchaUrl(undefined));\r\n        } else {\r\n            if (loginResponse.resultCode === ResultCode.captchaIsRequired){\r\n                const captchaUrl = await loginApi.getCaptcha()\r\n                dispatch(authActionCreators.addCaptchaUrl(captchaUrl))\r\n            }\r\n            return loginResponse.messages[0]\r\n        }\r\n    };\r\n}\r\n\r\nexport const logout = ():AuthReducerThunkType => async (dispatch) => {\r\n    const logoutResponse = await loginApi.logout();\r\n    if (logoutResponse.resultCode === ResultCode.success) {\r\n        dispatch(authActionCreators.addAuthUserData(null, null, null, false))\r\n    }\r\n}\r\n\r\nexport default authReducer;","import { InferActionsType, ThunkType } from './../types/types';\r\nimport { ResultCode } from '../api/api';\r\nimport { profileAPI } from \"../api/profileAPI\";\r\nimport { UserProfileType, PhotosType } from '../types/types';\r\nimport { authActionCreators, AuthActionTypes } from './auth-reducer';\r\nimport { AppStateType } from './redux-store';\r\n\r\n//initial State\r\nexport type PostDataType = {\r\n    id: number\r\n    message: string\r\n    likeCounter: number\r\n}\r\n\r\nlet initialState = {\r\n    postData: [\r\n        {id: 1, message: \"Hi, how are you?\", likeCounter: 12},\r\n        {id: 2, message: \"It's my firs post\", likeCounter: 13},\r\n        {id: 3, message: \"It's my second post\", likeCounter: 14},\r\n        {id: 4, message: \"It's my third post\", likeCounter: 15},\r\n        {id: 5, message: \"It's my fourth post\", likeCounter: 16},\r\n        {id: 6, message: \"It's my fifth post\", likeCounter: 17}\r\n    ] as Array<PostDataType>,\r\n    newPostText: \"\" as string,\r\n    userProfile: null as UserProfileType | null,\r\n    userStatus: \"\" as string | null,\r\n    isFetching: false as boolean\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\n//Reducer\r\nconst profileReducer = (state = initialState, action: ProfileActionTypes):InitialStateType  => {\r\n\r\n        switch (action.type) {\r\n            case 'app/profile-reducer/ADD-POST':\r\n                let newPostObj = {\r\n                    id: 5,\r\n                    message: action.newPostText,\r\n                    likeCounter: 0\r\n                };\r\n                \r\n                return {\r\n                    ...state,\r\n                    postData: [newPostObj, ...state.postData],\r\n                    newPostText: \"\"\r\n                };\r\n\r\n            case 'app/profile-reducer/UPDATE-TEXT-AREA': \r\n\r\n                return {\r\n                    ...state,\r\n                    newPostText: action.newText\r\n                };\r\n            ;\r\n\r\n            case 'app/profile-reducer/SET_USER_PROFILE': \r\n                return {\r\n                    ...state,\r\n                    userProfile: action.profile\r\n                }\r\n            ;\r\n\r\n            case 'app/profile-reducer/SET_USER_STATUS': {\r\n                return {\r\n                    ...state,\r\n                    userStatus: action.status\r\n                };\r\n            }\r\n\r\n            case 'app/profile-reducer/SAVE_PHOTO_SUCCESS': \r\n                return {\r\n                    ...state,\r\n                    userProfile: {...state.userProfile, photos: action.photos},\r\n                }\r\n            ;\r\n\r\n            case 'app/profile-reducer/IS_FETCHING': \r\n                return {\r\n                    ...state,\r\n                    isFetching: action.isFetching\r\n                }\r\n\r\n            default:\r\n                return state;\r\n        }\r\n    }\r\n\r\n//Action Creators\r\ntype ProfileActionTypes = InferActionsType<typeof profileActionCreators>\r\n\r\n\r\n\r\nexport const profileActionCreators = {\r\n    addPost: (newPostText: string)  => ({type: 'app/profile-reducer/ADD-POST', newPostText} as const),\r\n    updateTextAreaActionCreator: (text: string)  => ({ type: 'app/profile-reducer/UPDATE-TEXT-AREA', newText: text } as const),\r\n    setProfile: (profile: UserProfileType) => ({ type: 'app/profile-reducer/SET_USER_PROFILE', profile } as const),\r\n    setUserStatus: (status:string | null) => ({type: 'app/profile-reducer/SET_USER_STATUS', status} as const),\r\n    savePhotoSuccess: (photos: PhotosType)  => ({type: 'app/profile-reducer/SAVE_PHOTO_SUCCESS', photos} as const),\r\n    isFetching: (isFetching: boolean)  => ({type: 'app/profile-reducer/IS_FETCHING', isFetching} as const)\r\n}\r\n\r\n\r\n\r\n//side effects, Thinks\r\n\r\ntype ProfileReducerThunkType = ThunkType<ProfileActionTypes | AuthActionTypes> \r\n\r\nexport const addNewPost = (newPostText: string): ProfileReducerThunkType => {\r\n    return (dispatch) => dispatch(profileActionCreators.addPost(newPostText))\r\n};\r\n\r\nexport const setUserProfile = (userId: number | null): ProfileReducerThunkType => async (dispatch) => { \r\n            dispatch(profileActionCreators.isFetching(true));\r\n            const userProfile = await profileAPI.getUserProfile(userId);\r\n            dispatch(profileActionCreators.setProfile(userProfile));\r\n            dispatch(profileActionCreators.isFetching(false));\r\n        }\r\n\r\nexport const setStatus = (userId:number | null): ProfileReducerThunkType => async (dispatch) => {\r\n        const userStatus = await profileAPI.getUserStatus(userId)\r\n                dispatch(profileActionCreators.setUserStatus(userStatus))\r\n        }\r\n\r\nexport const updateStatus = (status: string | null): ProfileReducerThunkType => async (dispatch) => {\r\n    const updateStatusResultCode = await profileAPI.updateUserStatus(status)\r\n        if (updateStatusResultCode === ResultCode.success ){\r\n            dispatch(profileActionCreators.setUserStatus(status))\r\n        }\r\n}\r\n\r\nexport const saveUserPhoto = (photo: File): ProfileReducerThunkType => async (dispatch) => {\r\n    dispatch(profileActionCreators.isFetching(true))\r\n    const updateUserPhotoResponse = await profileAPI.updateUserPhoto(photo)\r\n        if (updateUserPhotoResponse.resultCode === ResultCode.success ){\r\n            dispatch(profileActionCreators.savePhotoSuccess(updateUserPhotoResponse.data.photos));\r\n            dispatch(authActionCreators.saveAuthUserPhotoSuccess(updateUserPhotoResponse.data.photos));\r\n        }\r\n    dispatch(profileActionCreators.isFetching(false))\r\n}\r\n\r\nexport const saveProfileInfo = (profile: UserProfileType): ProfileReducerThunkType => async (dispatch, getState: ()=> AppStateType) => {\r\n    const userId: number | null = getState().authorization.data!.id;\r\n    const updateUserProfileResponse = await profileAPI.updateUserProfile(profile)\r\n    if (updateUserProfileResponse.resultCode === ResultCode.success){\r\n        dispatch(setUserProfile(userId))\r\n    } else {\r\n        return updateUserProfileResponse.messages;\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import { ThunkType } from '../types/types';\r\nimport { authUser } from './auth-reducer';\r\n\r\n//Action types\r\nconst INITIALIZE_APP = 'myApp/auth-reducer/INITIALIZE_APP';\r\n\r\n//Initial State\r\n\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n//Reducer\r\n\r\n\r\nconst appReducer = (state = initialState, action: ActionType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case INITIALIZE_APP:\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n\r\n        default:\r\n            return state;\r\n            \r\n    }\r\n};\r\n\r\n//action creators\r\ntype ActionType = initializingSuccessActionCreatorType;\r\n\r\ntype initializingSuccessActionCreatorType = {\r\n    type: typeof INITIALIZE_APP\r\n};\r\n\r\nexport const initializingSuccess = ():initializingSuccessActionCreatorType  => ({type: INITIALIZE_APP});\r\n\r\n//thunkCreator for auth user\r\n\r\nexport type appThunkType = ThunkType<ActionType>\r\n\r\nexport const initialized = (): appThunkType => {\r\n    //thunk what return resolve of all promises\r\n    return (dispatch) => {\r\n        let promise = dispatch(authUser());\r\n        Promise.all([promise]).then(() => {\r\n            dispatch(initializingSuccess())\r\n        })\r\n    }\r\n}\r\n\r\nexport default appReducer;","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport friendsItemsReducer from \"./friendItems-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from './auth-reducer';\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport appReducer from './app-reducer';\r\n\r\n//combine reducers function what make new reducer\r\nlet rootReducer = combineReducers ({\r\n    profilePage: profileReducer,\r\n    dialogPage: dialogsReducer,\r\n    friendsItems: friendsItemsReducer,\r\n    usersPage: usersReducer,\r\n    authorization: authReducer,\r\n    app: appReducer\r\n})\r\n\r\n//get type of function rootReducer\r\ntype RootReducerType = typeof rootReducer // (globalState: AppStateType) => AppStateType\r\n//get type of response of function rootReducer\r\nexport type AppStateType = ReturnType<RootReducerType> \r\n\r\n\r\n// //@ts-ignore\r\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\r\n// const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\nconst store = createStore(rootReducer, applyMiddleware(thunkMiddleware));\r\n//@ts-ignore\r\nwindow.store = store;\r\n\r\nexport default store;","//import c from './News.module.css'\r\nimport React from \"react\";\r\n\r\nconst News: React.FC = (props) => {\r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default News;","import React from 'react'\r\n\r\nconst Music: React.FC = () => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;","//import c from './Settings.module.css'\r\nimport React from 'react'\r\n\r\nconst Settings: React.FC = (props) => {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Settings;","import { AppStateType } from './../redux-store';\r\n\r\nexport const getFriendsItems = (state: AppStateType) =>\r\n    state.friendsItems.friendsItems","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { getFriendsItems } from '../../redux/selectors/friendsItemsSelectors';\r\nimport Friends from './Friends/Friends';\r\n//import Friends from './Friends/Friends';\r\nimport c from './Navbar.module.css';\r\n\r\nconst Navbar: React.FC = (props) => {\r\n  const friendsItems = useSelector(getFriendsItems)\r\n\r\n  ////let friendItem = friendsItems.map(friendsItems => <Friends id={friendsItems.id} name={friendsItems.name} />)\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div className={c.nav}>\r\n        <nav >\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/profile\">Profile</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/users\">Users</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/dialogs\">Messages</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/news\">News</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/music\">Music</NavLink>\r\n          </div>\r\n          <div>\r\n            <NavLink className={c.item} activeClassName={c.activeLink} to=\"/settings\">Settings</NavLink>\r\n          </div>\r\n        </nav>\r\n      </div>\r\n      {/* <div className={c.friendsItems}>\r\n        <h3>Friends</h3>\r\n        <div className={c.friends}>\r\n          {friendItem}\r\n        </div>\r\n      </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Navbar;","import { AppStateType } from './../redux-store';\r\n\r\nexport const getAuthUserProfile = (state: AppStateType) =>\r\n    state.authorization.authUserProfile","import { NavLink } from 'react-router-dom';\r\nimport styles from './Header.module.css';\r\nimport { useStyles } from '../commonElements/formComponentCustomStyles';\r\nimport { Button, Toolbar, Typography } from '@material-ui/core';\r\nimport avatar from '../../assets/images/avatar.png'\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getIsAuth } from '../../redux/selectors/usersSelectors';\r\nimport { logout } from '../../redux/auth-reducer';\r\nimport { getAuthUserProfile } from '../../redux/selectors/authSelectors';\r\nimport { AppBar } from '@material-ui/core';\r\n\r\nconst Header: React.FC = () => {\r\n    const dispatch = useDispatch()\r\n\r\n    const authUserProfile = useSelector(getAuthUserProfile)\r\n    const isAuth = useSelector(getIsAuth)\r\n\r\n\r\n    const classes = useStyles();\r\n    const onSubmit = () =>{\r\n        dispatch(logout())\r\n    }\r\n\r\n    return (\r\n        <AppBar position=\"static\">\r\n            <Toolbar>\r\n                <Typography className={styles.headerText}>Social Network</Typography>\r\n                {isAuth && authUserProfile\r\n                    ? <NavLink to={\"/profile/\"} className={styles.headerUserData}>\r\n                        <img className={styles.logo} src={authUserProfile.photos?.small !== null ? authUserProfile.photos?.small : avatar} alt=\"profile\"></img>\r\n                        <span>{authUserProfile.fullName}</span>\r\n                    </NavLink>\r\n                    : <NavLink className={styles.headerUserData} to='/login'>\r\n                        <Typography>You are not authorized</Typography>\r\n                    </NavLink>}\r\n                <Button onClick={onSubmit} className={classes.LogoutButton} variant=\"contained\" type=\"submit\">Logout</Button>\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n}\r\n\r\nexport default Header","import React from 'react'\r\nimport {Form, Field} from 'react-final-form'\r\nimport { InputCustom, CustomButton} from '../commonElements/formComponent';\r\nimport { composeValidators, maxLengthCreator, required } from '../../utilits/validators';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { FORM_ERROR } from 'final-form';\r\nimport styles from './Login.module.css'\r\nimport { getIsAuth } from '../../redux/selectors/usersSelectors';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { AppStateType } from '../../redux/redux-store';\r\nimport { login } from '../../redux/auth-reducer';\r\n\r\n\r\n\r\nconst Login: React.FC = () => {\r\n\r\n  const isAuth = useSelector(getIsAuth)\r\n  const captcha = useSelector((state: AppStateType) => state.authorization.captcha)\r\n\r\n  const dispatch = useDispatch()\r\n\r\n\r\n\r\n  const onSubmit = async (values: ValuesType) => {\r\n    let error = await dispatch(login(values));\r\n    if (error !== undefined) {\r\n      return { [FORM_ERROR]: error }\r\n    }\r\n  }\r\n\r\n  if (isAuth === true){\r\n    return <Redirect to=\"/profile\" />\r\n  }\r\n  \r\n  \r\n  return(\r\n  <Form\r\n    onSubmit ={onSubmit}\r\n    captcha = {captcha}\r\n    render={({handleSubmit, submitError}) => (\r\n        <div>\r\n          <form className={styles.loginForm} onSubmit={handleSubmit}>\r\n            <div className={styles.email}>\r\n              <Field<string> name={\"email\"} component={InputCustom} validate={composeValidators(required, maxLengthCreator(30))}/>\r\n            </div>\r\n            <div>\r\n              <Field<string> name={\"password\"} component={InputCustom} type=\"password\" validate={composeValidators(required, maxLengthCreator(30))} />\r\n            </div>\r\n            <div>\r\n              <Field<boolean> name={\"rememberMe\"} component=\"input\" type={\"checkbox\"} />\r\n              <span>remember me</span>\r\n            </div>\r\n            {captcha &&\r\n              <div> \r\n                <img src={captcha} alt=\"captcha\"/>\r\n                <Field<string>  name=\"captcha\" component={InputCustom}/>\r\n              </div>}\r\n            {submitError && <div className={styles.error}>{submitError}</div>}\r\n            <div>\r\n            <CustomButton>Login</CustomButton>\r\n              {/* <Button variant=\"contained\" color=\"primary\" type=\"submit\">Login</Button>  */}\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n      )\r\n\r\n    }\r\n  />)\r\n}\r\n\r\nexport default Login;\r\n\r\ntype ValuesType = {\r\n  email: string\r\n  password: string\r\n  rememberMe: boolean\r\n  captcha: string | null\r\n}","import React, { ChangeEvent, useEffect, useState } from 'react';\r\nimport styles from './ProfileStatus.module.css';\r\nimport { TextField } from '@material-ui/core';\r\n\r\ntype PropsType = {\r\n    userStatus: string | null\r\n    updateStatus: (status: string | null) => void\r\n}\r\n\r\nconst ProfileStatusWithHooks: React.FC<PropsType> = ({userStatus, updateStatus}) => {\r\n\r\n    let [editMode, setEditMode] = useState(false);\r\n    let [status, setStatus] = useState(userStatus);\r\n    \r\n    useEffect( () => {setStatus(userStatus)}, [userStatus] );\r\n\r\n    const activateStatusEditor = () => {\r\n        setEditMode(true);\r\n    }\r\n\r\n    const deactivateStatusEditor = () => {\r\n        setEditMode(false);\r\n        updateStatus(status);\r\n    }\r\n\r\n    const onStatusChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(event.currentTarget.value);\r\n    }\r\n\r\n    return (\r\n        <div className={styles.profileStatus}>\r\n            {\r\n                editMode\r\n                    ? <div>\r\n                        <TextField autoFocus={true}\r\n                            onChange={onStatusChange}\r\n                            onBlur={deactivateStatusEditor}\r\n                            type=\"text\"\r\n                            value={status} \r\n                            label=\"Status\"\r\n                            variant=\"outlined\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    : <div className={styles.status}>\r\n                        <span onDoubleClick={activateStatusEditor}> <b>Status: </b>{status || `No Status`}</span>\r\n                        <div>\r\n                            <i>DoubleClick to change</i>\r\n                        </div>\r\n                    </div>\r\n\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProfileStatusWithHooks;","import {Form, Field} from 'react-final-form';\r\nimport { FORM_ERROR } from 'final-form';\r\nimport {\r\n    InputCustom,\r\n    CustomButton\r\n} from '../../commonElements/formComponent';\r\nimport styles from './Info.module.css'\r\nimport {checkError} from \"../../../utilits/validators\"\r\nimport React from 'react';\r\nimport { UserProfileType } from '../../../types/types';\r\nimport { useDispatch } from 'react-redux';\r\nimport { saveProfileInfo } from '../../../redux/profile-reducer';\r\n\r\ntype ProfileInfoEditModeType = {\r\n    setEditMode: (mode: boolean) => void\r\n    userProfile: UserProfileType | null\r\n}\r\n\r\n\r\nconst ProfileInfoEditMode: React.FC<ProfileInfoEditModeType> = ({setEditMode, userProfile, ...props}) => { \r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const saveProfile = async (values: UserProfileType) => {\r\n        const messages = await dispatch(saveProfileInfo(values))\r\n        if (messages !== undefined){\r\n            return { [FORM_ERROR]: messages }\r\n        } else {\r\n            setEditMode(false)\r\n        }\r\n    }\r\n    \r\n    return <div className={styles.editMode}>\r\n        <h4>Edit Mode</h4>\r\n        <Form\r\n            onSubmit={saveProfile}\r\n            initialValues={userProfile}\r\n            render={({handleSubmit, submitError}) => {\r\n                return <form onSubmit={handleSubmit} className={styles.editModeForm}>\r\n                    <div>\r\n                        <Field name=\"fullName\" component={InputCustom} label=\"Full Name\"/> \r\n                    </div>\r\n                    <div>\r\n                        <Field name=\"aboutMe\" component={InputCustom} label=\"About Me\"/> \r\n                        {submitError && <div className={styles.error}>{checkError(submitError, \"AboutMe\")}</div>}\r\n                    </div>\r\n                    {/* <div className={styles.lookingForAJob}>\r\n                        <b>Looking for job: </b>\r\n                            <Field name=\"lookingForAJob\" component='input' type='checkbox'/>\r\n                    </div> */}\r\n                    <div>\r\n                        <Field name=\"lookingForAJobDescription\" label=\"My professional skill\" component={InputCustom}/> \r\n                        {submitError && <div className={styles.error}>{checkError(submitError,\"LookingForAJobDescription\")}</div>}\r\n                    </div>\r\n                    <div>\r\n                        <h5>Contacts:</h5> {userProfile != null && Object.keys(userProfile.contacts!).map(key => {\r\n                            return <div key={key}>\r\n                                    <Field  name={\"contacts.\" + key} component={InputCustom} label={key} />\r\n                                    {submitError && <div className={styles.error}>{checkError(submitError, key)}</div>}\r\n                                </div>}\r\n                        )}\r\n                    </div>\r\n                    <CustomButton>Save</CustomButton> \r\n                </form>\r\n                }\r\n            }\r\n        />\r\n    </div>\r\n}\r\n\r\nexport default ProfileInfoEditMode;","import React from 'react';\r\nimport styles from './Info.module.css';\r\nimport ProfileStatusWithHooks from '../ProfileStatus/ProfileStatusWithHooks';\r\nimport { useState } from 'react';\r\nimport ProfileInfoEditMode from './ProfileInfoEditMode';\r\nimport { useStyles } from '../../commonElements/formComponentCustomStyles';\r\nimport { Button } from '@material-ui/core';\r\nimport { UserProfileType} from '../../../types/types';\r\n\r\ntype PropsType = {\r\n  userStatus: string | null\r\n  userProfile: UserProfileType | null\r\n  isOwner: boolean\r\n  updateStatus: (status: string | null) => void\r\n}\r\n\r\nconst Info: React.FC<PropsType> = ({userStatus, updateStatus, ...props}) => {\r\n\r\n  const [editMode, setEditMode] = useState(false);\r\n\r\n\r\n  return (\r\n    <div>\r\n      <ProfileStatusWithHooks userStatus={userStatus} updateStatus={updateStatus}/>\r\n      {editMode \r\n        ? <ProfileInfoEditMode setEditMode={setEditMode} {...props} /> \r\n        : <ProfileInfo setEditMode={setEditMode} {...props} />}\r\n    </div>\r\n  );\r\n}\r\n\r\ntype ProfileInfoPropsType = {\r\n  userProfile: UserProfileType | null\r\n  isOwner: boolean\r\n  setEditMode: (mode: boolean) => void;\r\n} \r\n\r\nconst ProfileInfo: React.FC<ProfileInfoPropsType> = ({setEditMode, userProfile,isOwner}) => {\r\n  const classes = useStyles()\r\n  const changeEditMode = () => {\r\n    setEditMode(true);\r\n  }\r\n  if (userProfile != null) {\r\n    return <div className={styles.info}>\r\n      <h1>{userProfile.fullName}</h1>\r\n      <div>\r\n        {userProfile.aboutMe && <b>About me:</b>} {userProfile.aboutMe}\r\n      </div>\r\n      {/* <div>\r\n        <b>Looking for job: </b>{userProfile.lookingForAJob ? \"Yes\" : \"No\"}\r\n      </div> */}\r\n      <div>\r\n        {userProfile.lookingForAJobDescription && <span><b>My professional skill:</b> {userProfile.lookingForAJobDescription}</span>}\r\n      </div>\r\n      <div>\r\n        <b>Contacts</b>: {Object.keys(userProfile.contacts!).map(key => {\r\n          if(userProfile.contacts != null){\r\n            return <Contact key={key} contactTitle={key} contactValue={userProfile.contacts[key]!} />\r\n          }\r\n          return null\r\n        })}\r\n      </div>\r\n      {isOwner && <Button onClick={changeEditMode} className={classes.LoginButton} variant=\"contained\" type=\"submit\">Edit Mode</Button>}\r\n    </div>\r\n  }\r\n  return null\r\n}\r\n\r\ntype ContactPropsType ={\r\n  contactTitle: string\r\n  contactValue: string\r\n}\r\n\r\nconst Contact: React.FC<ContactPropsType> = ({contactTitle, contactValue}) => {\r\n  \r\n  return <div>\r\n    {contactValue && \r\n      <span><b>{contactTitle}: </b><a href={contactValue} target=\"_blank\" rel=\"noreferrer\" >{contactValue}</a>  </span> \r\n    } \r\n  </div>\r\n  }\r\n\r\nexport default Info;","import React from 'react';\r\nimport c from './AddNewPost.module.css';\r\nimport { Field, Form } from 'react-final-form';\r\nimport { maxLengthCreator} from '../../../../utilits/validators';\r\nimport { CustomButton, InputCustom } from '../../../commonElements/formComponent';\r\n\r\ntype AddNewPostType = {\r\n  addNewPost: (newPostText: string) => void\r\n}\r\n\r\nconst AddNewPost: React.FC<AddNewPostType> = ({addNewPost}) => {\r\n\r\n  let addPost = (value: {newPostText: string}) => {\r\n      addNewPost(value.newPostText);\r\n      value.newPostText = \"\";\r\n  }\r\n    \r\n  return (\r\n  <div>\r\n    <Form onSubmit={addPost}\r\n      render={ ({handleSubmit}) => (\r\n          <form onSubmit={handleSubmit} className={c.Textarea}>\r\n            <div>\r\n              <Field<string> className={c.inputField}\r\n                name=\"newPostText\" \r\n                component= {InputCustom} \r\n                label=\"Something new?\"\r\n                validate={maxLengthCreator(150)}\r\n              />\r\n            </div>\r\n            <div>\r\n              <CustomButton>Post</CustomButton>\r\n            </div>\r\n            \r\n            \r\n          </form>\r\n        )\r\n        }\r\n    />\r\n  </div> \r\n  );\r\n}\r\n\r\n\r\nexport default AddNewPost;","import React from 'react';\r\nimport c from './Post.module.css';\r\n\r\n\r\nconst Post: React.FC<PropsType> = ({message, likeCounter}) => {\r\n  return (\r\n    <div>\r\n      <div className={c.item}>\r\n        <div className={c.postInfo}>\r\n          <img src=\"https://ps.w.org/wp-user-avatar/assets/icon-256x256.png?rev=1755722\" alt=\"postAvatar\" />\r\n          <div className={c.name}>\r\n            <div>Oleksandr Tomesh</div>\r\n            <div>04/12/2020</div>\r\n          </div>\r\n        </div>\r\n        <div className={c.message}>\r\n          {message}\r\n        </div>\r\n        <div className={c.like}>\r\n          Like {likeCounter}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Post;\r\n\r\n\r\ntype PropsType = {\r\n  message: string\r\n  likeCounter: number\r\n}","import { AppStateType } from './../redux-store';\r\n\r\n\r\nexport const getUserProfile = (state: AppStateType) =>\r\n    state.profilePage.userProfile\r\n\r\nexport const getAuthUserData = (state: AppStateType) =>\r\n    state.authorization.data\r\n\r\nexport const getUserStatus = (state: AppStateType) =>\r\n    state.profilePage.userStatus\r\n\r\nexport const getIsProfileFetching = (state: AppStateType) =>\r\n    state.profilePage.isFetching\r\n\r\nexport const getPostData = (state: AppStateType) =>\r\n    state.profilePage.postData\r\n\r\nexport const getNewPostText = (state: AppStateType) =>\r\n    state.profilePage.newPostText\r\n","import React from 'react';\r\nimport AddNewPost from './AddNewPost/AddNewPost';\r\nimport styles from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport {addNewPost} from '../../../redux/profile-reducer'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getPostData } from '../../../redux/selectors/profileSelectors';\r\n\r\ntype MyPostsType = {\r\n  isOwner: boolean  \r\n}\r\nconst MyPosts: React.FC<MyPostsType> = ({isOwner}) => {\r\n  const dispatch = useDispatch()\r\n\r\n  const postData = useSelector(getPostData) \r\n  const addPost = (newPostText: string) => {\r\n    dispatch(addNewPost(newPostText))\r\n  }\r\n\r\n  if (isOwner === true) {\r\n    return <div className={styles.MyPosts}>\r\n          <div className={styles.addNewPost}>\r\n            <AddNewPost addNewPost={addPost} />\r\n          </div>\r\n          <div className={styles.posts}>\r\n            {postData.map(p => <Post key={p.message} message={p.message} likeCounter={p.likeCounter} />)}\r\n          </div>\r\n        </div>;\r\n  } else {\r\n    return <div className={styles.post}>\r\n        This user does not have posts yet\r\n      </div>;\r\n  }\r\n};\r\n\r\nexport default MyPosts;","import React, { ChangeEvent} from 'react'\r\nimport Loader from '../commonElements/loader/loader';\r\nimport Info from './Info/Info';\r\nimport MyPosts from './MyPosts/MyPosts';\r\nimport c from './Profile.module.css';\r\nimport avatar from '../../assets/images/avatar.png';\r\nimport { UploadButton } from '../commonElements/formComponent';\r\nimport { UserProfileType} from '../../types/types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getIsProfileFetching, getUserProfile, getUserStatus } from '../../redux/selectors/profileSelectors';\r\nimport { saveUserPhoto, updateStatus } from '../../redux/profile-reducer';\r\n\r\ntype PropsType = {\r\n  isOwner: boolean \r\n}\r\n\r\n\r\nconst Profile: React.FC<PropsType> = ({isOwner}) => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const userProfile = useSelector(getUserProfile)\r\n  const isProfileFetching = useSelector(getIsProfileFetching)\r\n  const userStatus = useSelector(getUserStatus)\r\n\r\n  const updateUserStatus = (status: string | null) => {\r\n    dispatch(updateStatus(status))\r\n  }\r\n  \r\n  const savePhoto = (photo: File) => {\r\n    dispatch(saveUserPhoto(photo))\r\n  }\r\n  const selectedMainPhotoFile = (event: ChangeEvent<HTMLInputElement>) => {\r\n    if(event.target.files?.length){\r\n      savePhoto(event.target.files[0])\r\n    }    \r\n  }\r\n\r\n  if(!userProfile){\r\n    return(<Loader />)\r\n  }\r\n\r\n  return (<div className={c.content}>\r\n      <div className={c.profile_info}>\r\n        <div className={c.profile_photo}>\r\n          {!isProfileFetching \r\n            ? <img src={userProfile.photos?.large !== null ? userProfile.photos?.large : avatar } alt=\"profile\"></img>\r\n            : <Loader />}\r\n          <div className={c.uploadButton}>\r\n            {isOwner && <UploadButton onChangeHandler={selectedMainPhotoFile} buttonAssign=\"Upload Profile Photo\"/>}\r\n          </div>\r\n        </div>\r\n        \r\n        <Info \r\n          userProfile={userProfile}\r\n          userStatus={userStatus}\r\n          updateStatus={updateUserStatus}\r\n          isOwner={isOwner}\r\n        />\r\n      </div>\r\n      <MyPosts isOwner={isOwner}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;","import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector} from 'react-redux'\r\nimport { RouteComponentProps, useHistory, useParams, withRouter } from 'react-router-dom'\r\nimport withAuthRedirect from '../../HightOrderComponent(hoc)/withAuthRedirect'\r\nimport {\r\n    setUserProfile,\r\n    setStatus,\r\n} from '../../redux/profile-reducer'\r\nimport Profile from './Profile'\r\nimport { compose } from 'redux'\r\nimport Loader from '../commonElements/loader/loader'\r\nimport { getAuthUserData, getIsProfileFetching } from '../../redux/selectors/profileSelectors' \r\n\r\nconst ProfileContainer: React.FC = React.memo(() => {\r\n  \r\n  const dispatch = useDispatch()\r\n\r\n  //get data from profile reducer\r\n  const authorizedUserId = useSelector(getAuthUserData)\r\n  const isProfileFetching = useSelector(getIsProfileFetching)\r\n\r\n  \r\n  const setProfile = (userId: number | null) => {\r\n    dispatch(setUserProfile(userId))\r\n  }\r\n  const setUserStatus = (userId: number | null) => {\r\n    dispatch(setStatus(userId))\r\n  }\r\n  \r\n  //function for set or refresh user profile\r\n  const refreshProfile = (id: string) => {\r\n    let userId: number | null = parseInt(id)\r\n    if(!userId && authorizedUserId != null){\r\n      userId = authorizedUserId.id\r\n    }\r\n    setProfile(userId)\r\n    setUserStatus(userId)\r\n  }\r\n\r\n  //get params (userId) from URL\r\n  let {userId}: {userId: string} = useParams()\r\n  \r\n  //refresh user profile\r\n  useEffect(() => {\r\n    refreshProfile(userId)\r\n  }, [userId])\r\n  \r\n    return (\r\n      <div>\r\n        {isProfileFetching\r\n          ?<Loader/>\r\n          :<Profile isOwner={!userId} />\r\n        }\r\n      </div>\r\n        )\r\n}\r\n)\r\n\r\n//This is a HOC what verify does user authorised, if not redirect to \"/login\"\r\nexport default  withAuthRedirect(ProfileContainer) as React.ComponentType;","import './App.css';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport News from './components/News/News';\r\nimport Music from './components/Music/Music';\r\nimport Settings from './components/Settings/Settings';\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport Header from './components/Header/Header';\r\nimport Login from './components/Login/Login';\r\nimport React, { lazy } from 'react';\r\nimport { connect, ConnectedProps } from 'react-redux';\r\nimport { initialized } from './redux/app-reducer';\r\nimport Loader from './components/commonElements/loader/loader';\r\nimport { Suspense } from 'react';\r\nimport { AppStateType } from './redux/redux-store';\r\nimport ProfileContainer from './components/Profile/ProfileContainer';\r\nimport { Grid } from '@material-ui/core';\r\n\r\n//use React.lazy for code-splitting\r\nconst DialogsContainer = lazy(() => import('./components/Dialogs/Dialogs'));\r\nconst UsersPage = lazy(() => import('./components/Users/Users'));\r\n\r\nclass App extends React.Component<AppPropsType> {\r\n\r\n  componentDidMount = () => {\r\n    this.props.initialized();\r\n  }\r\n\r\n  render = () => {\r\n    if (!this.props.initialized) {\r\n      return <Loader />\r\n    }\r\n\r\n    return (\r\n    <Grid container direction=\"column\" spacing={2}>\r\n        <Grid item xs={12}>\r\n          <Header />\r\n        </Grid>\r\n        <Grid item container direction=\"row\" spacing={2}>\r\n          <Grid item sm={1}/>\r\n          <Grid item xs={12} sm={2}>\r\n            <Navbar />\r\n          </Grid>\r\n          <Grid item sm={8}>\r\n            <Suspense fallback={<Loader />}>\r\n              <Switch>\r\n                <Route exact path=\"/\" render={() => <Redirect to=\"/profile\" />} />\r\n                <Route path=\"/login\" render={() => <Login />} />\r\n                <Route path=\"/users\" render={() => <UsersPage />} />\r\n                <Route path=\"/dialogs\" render={() => <DialogsContainer />} />\r\n                <Route path=\"/profile/:userId?\" render={() => <ProfileContainer />} />\r\n                <Route path=\"/news\" component={News} />\r\n                <Route path=\"/music\" component={Music} />\r\n                <Route path=\"/settings\" component={Settings} />\r\n                <Route path=\"*\" render={() => <div>404 NOT FOUND</div>} />\r\n              </Switch>\r\n            </Suspense>\r\n          </Grid>\r\n          <Grid item sm={1}/>\r\n        </Grid>\r\n      </Grid>)\r\n  };\r\n}\r\n\r\nlet mapDispatchToProps = (state: AppStateType) => {\r\n  return {\r\n    initialized: state.app.initialized\r\n  }\r\n}\r\n\r\nconst connector = connect(mapDispatchToProps, { initialized })\r\n\r\nexport default connector(App);\r\n\r\ntype AppPropsType = ConnectedProps<typeof connector>","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import store from './redux/redux-store';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './App.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport { HashRouter} from 'react-router-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <HashRouter>\r\n            <Provider store={store}>        \r\n                <App />\r\n            </Provider>\r\n        </HashRouter>\r\n    </React.StrictMode>,\r\ndocument.getElementById('root')\r\n);\r\n\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","//import styles from \"./formComponent.module.css\";\r\nimport {useStyles} from './formComponentCustomStyles';\r\nimport { Button, Select, TextField} from '@material-ui/core';\r\nimport React, { ChangeEvent } from 'react'; \r\nimport {FieldRenderProps} from \"react-final-form\";\r\n\r\n\r\nexport const InputCustom: React.FC<FieldRenderProps<any>> = (props) => {\r\n\r\n    const classes = useStyles()\r\n    const {input, meta, children, ...restProps} = props;\r\n    return (\r\n            <TextField \r\n                className={classes.textField}\r\n                variant=\"outlined\"\r\n                color=\"primary\" \r\n                label={input.name}\r\n                size=\"small\"\r\n                error={meta.error && meta.touched}\r\n                helperText={meta.touched ? meta.error : undefined}\r\n                {...input} \r\n                {...restProps} />\r\n    )\r\n};\r\n\r\ntype PropsType = {\r\n    children: string\r\n}\r\n\r\nexport const CustomButton: React.FC<PropsType> = ({children}) => {\r\n\r\n    const classes = useStyles()\r\n    return <Button className={classes.LoginButton} variant=\"contained\" type=\"submit\">{children}</Button> \r\n}\r\n\r\ntype UploadButtonPropsType ={\r\n    onChangeHandler: (event: ChangeEvent<HTMLInputElement>) => void\r\n    buttonAssign: string\r\n}\r\n\r\nexport const UploadButton: React.FC<UploadButtonPropsType> = ({onChangeHandler, buttonAssign}) => {\r\n\r\n    const classes = useStyles()\r\n\r\n    return <label htmlFor=\"upload-photo\">\r\n        <input\r\n            style={{ display: 'none' }}\r\n            id=\"upload-photo\"\r\n            name=\"upload-photo\"\r\n            type=\"file\"\r\n            onChange={onChangeHandler}\r\n        />\r\n        <Button className={classes.UploadButton} variant=\"contained\" component=\"span\">\r\n            {buttonAssign}\r\n    </Button>\r\n    </label>\r\n}\r\n\r\n//material UI for Formik\r\n\r\nexport const InputFormik: React.FC<InputFormikPropsType> = (props) => {\r\n    return (\r\n        <TextField\r\n            variant=\"outlined\"\r\n            color=\"primary\" \r\n            label={props.name}\r\n            size=\"small\"\r\n        />\r\n    )\r\n}\r\n\r\nexport const SelectFormik: React.FC<{name: string}> = (props) => {\r\n\r\n    return (\r\n        <Select variant=\"outlined\" name={props.name}>\r\n            <option value=\"null\">All users</option>\r\n            <option value=\"true\">Only followed</option>\r\n            <option value=\"false\">Only unfollowed</option>\r\n        </Select>\r\n\r\n    )\r\n}\r\n\r\ntype InputFormikPropsType = {\r\n    name: string\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__slPY0\",\"item\":\"Navbar_item__dgERQ\",\"activeLink\":\"Navbar_activeLink__8SB2B\",\"friendsItems\":\"Navbar_friendsItems__2YQVu\",\"friends\":\"Navbar_friends___ubY9\"};","\r\n\r\nexport const required = (value: string) => (value ? undefined : 'Required')\r\n\r\n//validator to set max length in Field\r\nexport const maxLengthCreator = (maxLength: number) => (value: string) => (value && value.length > maxLength \r\n    ? `Max length is ${maxLength} symbols`\r\n    : undefined )\r\n\r\n    //Function compose all validators from final-form\r\nexport const composeValidators = (...validators: Array<Function>) => (value: string) => \r\n        validators.reduce((error, validator) => error || validator(value), undefined);\r\n\r\n\r\nexport const checkError = (error: Array<string>, value: string) => {\r\n    const newValue = value[0].toUpperCase() + value.slice(1);\r\n    return( error && error.map(messages => {\r\n            if(messages.indexOf(newValue) >= 0){\r\n                return messages;\r\n            }\r\n            return undefined;\r\n        }))\r\n    }\r\n\r\n","export default __webpack_public_path__ + \"static/media/Spinner.7593a230.svg\";","import styles from './Loader.module.css'\r\nimport loader from '../../../assets/images/Spinner.svg'\r\nimport React from 'react'\r\n\r\nlet Loader: React.FC = () => {\r\n    return(\r\n        <div className={styles.loader}>\r\n            <img src={loader} alt=\"loader\" />\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default Loader;","import { makeStyles } from \"@material-ui/core\";\r\n\r\n\r\n\r\nexport const useStyles = makeStyles({\r\n    textField:{\r\n        width: '100%',\r\n        marginBottom: '15px'\r\n    },\r\n    LoginButton:{\r\n        width: '10rem',\r\n        background: 'linear-gradient(45deg, gray, #2d2d2d)',\r\n        color: 'white'\r\n    },\r\n\r\n    LogoutButton:{\r\n        width: '10rem',\r\n        background: 'white',\r\n        color: 'black'\r\n    },\r\n\r\n    UploadButton: {\r\n        background: 'linear-gradient(45deg, gray, #2d2d2d)',\r\n        color: 'white'\r\n    }\r\n    \r\n})\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"Info_info__2qP2I\",\"editModeForm\":\"Info_editModeForm__1e2fL\",\"job\":\"Info_job__1li1e\",\"error\":\"Info_error__2N64K\",\"editMode\":\"Info_editMode__32hPv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__1oqx-\",\"postInfo\":\"Post_postInfo__3ZaLI\",\"name\":\"Post_name__2LXem\",\"message\":\"Post_message__2SCuw\"};","import { UsersType } from './users-reducer';\r\nimport { InferActionsType } from './../types/types';\r\n\r\n\r\nlet initialState = {\r\n    friendsItems: [\r\n] as Array<UsersType>\r\n};\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\nconst friendsItemsReducer = (state = initialState, action: FriendItemsActionsType):InitialStateType => {\r\n    \r\n        switch (action.type){\r\n            case 'app/friendsItems-reducer/ADD-FOLLOWING-USER':\r\n                return {\r\n                    ...state,\r\n                    friendsItems: [...state.friendsItems, action.user]\r\n                }\r\n            case 'app/friendsItems-reducer/REMOVE-USER':\r\n                return {\r\n                    ...state,\r\n                    friendsItems: state.friendsItems.filter((friend) => friend.id !== action.id)\r\n                }\r\n\r\n            default: \r\n                return state\r\n        }\r\n    \r\n}\r\n\r\nexport type FriendItemsActionsType = InferActionsType<typeof friendsItemsActions>\r\n\r\nexport const friendsItemsActions = {\r\n    addFollowingUser: (user: UsersType) => ({type: 'app/friendsItems-reducer/ADD-FOLLOWING-USER', user} as const),\r\n    removeUserFromFriendsItems: (id: number) => ({type: 'app/friendsItems-reducer/REMOVE-USER', id} as const)\r\n}\r\n\r\nexport default friendsItemsReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerText\":\"Header_headerText__11jLN\",\"logo\":\"Header_logo__2IV0K\",\"headerUserData\":\"Header_headerUserData__3baIP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MyPosts\":\"MyPosts_MyPosts__39yWW\",\"addNewPost\":\"MyPosts_addNewPost__2T3iO\",\"post\":\"MyPosts_post__2TevQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Profile_content__1A_Ne\",\"profile_info\":\"Profile_profile_info__3sXB9\",\"profile_photo\":\"Profile_profile_photo__3d9IN\",\"uploadButton\":\"Profile_uploadButton__xKTjd\"};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAgMAAACJFjxpAAAADFBMVEUAAAAAAAAAAAAAAAA16TeWAAAAA3RSTlM8AMhCuJKoAAAObklEQVR42u2dvXLbSBLHx65yshvjJc4BH4GuDY8BXcQHAwR6BDwC7brSIzDfcEsb+BGQHB9B+TJQlcsZA1YJPoo4n2XLsjDd/e/pGdh7hUklgD/0x79nBoMZV/7g5iaACWACmAAmgAlgApgAJoAJYAKYACaACWACmAAmgAlgApgAJoAJYAL4OwO8+uXqqu+vrn5/9kMA3J/9Q/vgRgd49a7/rn18Ni7AL/2g/T4iQPGy97T32VgAxbve2z5m4wBQvx9GoAcoZj3ZbrMRAJjf/0SQHmDRs22fGuC3XmiXaQGKVgI4Z0kBZr3YblMCLHqg7dMByA7QO8FFdoDaCRqAVQ+2y0QA84H0XrlP7Wogzac0AE8j8I+HLsCrf4THoQuNwPcvHv/x9cvQOHRhBji/efrn522YCVyQAT6+GP7D6zbIBC7EAP6q+10/YR8b4LEBqH7HYwLYBE5vAPrejyn3cQEe3frMyMyqVZsABKi/PdpbsLtwExXgmwj+xf/jr1o5xABWsGUf+eoyIsAMv+tKWRQhgEIT29/yJYsGsNCE9jcn7KMBtCq35g+4sQByZVfnIWJ2kQBmyp7OQxx2cQAKdV9vpghDp1DBLQpQKdTQ4SrYlXBrcDV0+ONscYAVfo2DRUDV25/BUuBgD6iGvSvYBw71gHLMOUN94FAP7HQAOeoDB3rgXCpbC/rAgR5QT70sQC1yoAqpp78KUIsc5oGuVLcGC16HPcdOD5BjtnOQB85lQGshHzjIjvsQgAXkPQc9xTYEoIKs5xBFPZVBbY5oOA+w5N3orj43xwfQwQAw5wL59cNLow8vuBQ6hQMUXCo/Goj257dcRcqCAXLGA6tWnpmrARFxQBJm8pSVf9BeAIno5CS85UeLXH9hLgeBkxPZ54F/YnPUtSwjTtbhTHYA+X+yGjsxBE7SnCE3DpqLQeDEENiDBvBaeiGqsRNDYAsawCt5KzEInBQCZ264LkdBKwWBk0KgY4brQCI0UhA4KQR2gAYwMxK5pAROKgQZM2MEvCoppHLghEJwYictgTCcC+XACX2Bg8IDXh8shT6BE/oCO40HfPkmBYHjQ8AzL5frXlp+Ea1MDVBRNa7hAE6Ux7ZqgJpSEP7taYbfSABoCPCKf2e5Iy7o1AAtEdU1D3Ag7nTSAhSUSxse4ESlU6YEyNnnUQXBkpUiflChVAH/JTk/uGFjUKkC/h8q2Ch0XAyeyMEa3ToiCE46gIIKgUZcP0FBZyqAnAoceRFHht+MAagJGRJjsO+vCSm6UQE0bAdHGYX3ZutUAHPikloGoALnpAEoqGdZygB3FHamAKiosJkDy4gox20VADXfzdemQcGkgaP7g+cyJAm8T9rS/UI/wIaIwQoB2BFR2CkAWiIGcwTgOLzugh6iOjoJdsSNAvIwp9PAC7Cm/n+JANxRT3QNA9SUxRoE4KTwKQGw5Cc8pEaRH2CADfXv0IJG0nd3MEBLxCAkA14hyMk0cGQSbANlwItekWngyEpQBsqAP9jIauCoJDiFAxyp8L0BAcgkqDGAgyYNHPXPN2WgDjHsHQgwp4pngwHcUd47gQAtFTAgwIkK7DMGUFBJAAqhP99bIg8dUYpOBgAa/hoCIOMFVGK/4FCR7YhY9+VyiS7t9sXPBZGHjmDdlcGlwA+QE3Z1hLe2FoBrKg1OEAAVr2gtYsx3RgAKMpPWFgDquZz/Oe/K8FpE9L02fs86/88c4gMs/bZxfhm4MQEcyZ7uDQCwJL1YmwAIyzq/DGxNAAdyxN0BAHNyEGMDKPxC4Lzp4h/GXZgAiBs7EDQCgN+0DnSVCqCjJ762IgAtA2iXkALwp5fDZcAK4L+z89p5lwIg90qEw2XACuCPLuetGVkKgMJb5ZwvWc5lCoDPQnASAVp6VtUK4H0257MTcQOjDtyHVyYAVMyrZqMS3ltwKwCsman92ghQ+zqszpesuzQA3ns7349sjQDHkhaCGwFgybxfsvUJvwT4QQBoqMFlBIDSlyHOI4TUwqe1FaD1SKHziAX1jtE0MqJu7jyQXSqAxmNe53HTwQpwXTJKxAMUTBbZRscPUpqxABUXQ6b5AUpkHC6EdoDcYx4fAHV9aQVYex7P4UqMA2QlrsUOV2LbLBmlxR4AegWoFeDzDXiAJj1AxwJs2JVvKAB5g/mwGLjhf3Ts9SaAZvh8TnRSpMlqKsQcXgrGACj4RcBmgHoYoiqATXKAil8BCwLQaeRRejcU62s2iE0Anvs7RS2yA3gs7CQfRQXwxNhPBnDBf41gBvgsdEcGYBkF4I4HOAgAp5QAcwGg4S9fmgE2g2LnhL9HBhg+oVNU40gAJwHgYAYQHoEDaMcAOAsAx5QAFwIAX40jANSDHpsbKOUuZRDmA61XATSpASq+OxChFqwH9X4IsC3Tdck8v+B4vsidUo+NhwBZmW5odh9lNEAuAFjnB3xhrgEokgPU7MDOPkvmk7oBwDkCwI4Po2CAdXKAC15FzJPVXzL5SAIsxwE4/NwAdxEAjrya0wDNOAAdC9ClBWh+boBNJIAbxcDAsRESH2D5cwPMxwE4hQKsRwE4pi1GFxaA6v8foOX9F6NHNOhyaAAi9An/5gDmt2ZmgHYMgN3PDGB+Z3Qv58kBzskAzC8srABNagBBRiPMEd2X9NQAXTKAix8NYPjUKw5Abu6VjwNwkwxgbe6PGAGq1ACSEBXm7oBRCUtzMbQCtNZiaAWYW4uhFWBjrUUAALuvaWOtRcY+IVaNuoQAtbUUWAFyqxJbASqrEH4G4AenLEBhFULb6LgM3YckIsDcqENmgMaoQwAAv7fu0igDwhzRRgSojTJgmyfE+kQ7IwBvwcKYhbbJaiwPs7QAjS0J7ABLWxIIb0yWUjUH0uBgBTilBZgnBzhaAC5kgNzUG5BeXNZiLTEDmN4dQ1K4swL0/A0qIwD/+j6PAHAtAwSvoICKwVa+nAZYjwNwzQNsbdUokz1IA1QRAIAQ2vIA17KSBHdJpaVcBZBHGxOAcTUd0CE4mQBKQEsbw9hcXNAoDw7FHkknAxjWlALzxQf5ag5AHplIHYKjbD9pXXFnqsdABHEA8sBAqsdADnFLuxs5jitTMZQWtwOdwsJSi8Tl/UtZy9T7lg8u5gAuzADAxUcGAOiT8dVIojd+ZSNrMRJAHEAOxNHSoMTih05rIJNqgxKLn3pVgJbkBiUWP3YrADVdG5TY+r2hLIU7I4D0kYkohUAA89+cAgCsEmVWAKAec0ok6ZD82e9GFhMOALmU//C5AR5jE6xDwKffS9COBgD+4/cLMJLChNC3w4VqAwQRAJEQfgOEHCgGF8E6BGwBsUblLKhHCGyCUaGCHiSEwDYgBVDS6mAh9IW4ZisYMwCwFQy7GY7YIUAURNoMZ26ZrT0DSixtB7SxzNaeACGUNkRq5I55OIBPrTWbYokAd4ASS5ti1bKeBAN4N13TbIwm9kqR9JE2RlvLUhgMAG0NV8lKFAwAbY5XyDcKBoC2B+Q2SLQCzHtgg0Rui0grgPfZNJtkGgHATTKXYl0PBfDHt2ajVCMAuFFqLQpBKAC4VWwuCkFuWD4CbJZbiXcKrQXgdsEFtCQwpBzPvfml2TJa7BOeM0kGgC2jmU2zv5iImR94L8kAsml2IwjBjJsh2QsygGwbvuSFYMFPVr/lQwfZOJ0Xgt+kpWwvdDKg2jy/HBw27mkfM5UMqI4P+BRI7+SVVO+5iZUtAFAwQ4wZsqJyz0yuZQAAfYSEFIBf2yWZhdAREvQhGivwQyuvHikO0aCOESnQT828p8ArjhFZEmkw6+G2J+YGsINUiKNkFr2iXfrtih0l4z9M53WrARiGwZwY86HHCRWzXtVu0dxCD1T6tVe2vScJwAOVfEdKrXp1uxwmAXqkVDPovhatHuD7oqA6VGt4rNisD2h/8Q/FAAzMteiD2lverTTA06PlQhzwNBdbSt+Rw/VmfWC7ffJMGQjw5HjBRR/c9t95FT5e8PuD6FZtOMBDLpLH5QFHTM4Mv9/fZp5HkgEeH7K56E1t/8ip+CGbj44Zfd3aAO6doD1m9NFBqzPj79/novag1XuLHe0O+OqEmu7oOnok3YVL0FMnqA/b/Xrc8CzC7//PCS092HHMFEC26qO0vf7A5Xvl/HcbB6D/F/NKjTt0+z991JYpAODNHhRNdew4utWBpukOXq/jA+iOns/jA1yrAIr4AJkKIH4UUnOIrhwpCjslQD1SDJIA0aNwpwQoRopBEiB2FJLz2K4cJwo7NUA9TgzSAFVcgK0aAN5+CesVlXqA+SgxyAAsYwIcAgDyMWSIAyjGkCEOIGYQMK/TXDlGEByCAOoRZIgFqEaQIRYgnhRx70Gd9LI3aSUSAOoRQoAFKNKrAA8QSwnYl+pOXHKQVAUEgDx1IZAAivQhwAPECQJ+XQUPsIgBsDcAVIl1WASIocbCElkBoEmrwzJAnjgJRYAicRKKAPa50tvSBlCnrIQIQJHYAyKAVQyl1d4ywCKtB2SAKqUMIgA2H4geAAAWST0AABQpcwABsGjRbRkDoE7pAQSgSOkBBCC8JndlHIDgl2eXkQBC+0WnMhZAoBTsowEUyUIQBAgLw66MB7BKFYIoQIga3pYxAQJ6x7uoAPqFBOcsKoA+E/dlXACtCVADwABaE6AGwAF0JoANgAPoTAAbQAGgMQFuAAWAxgS4ATQAuBzelmkAVnGrgB4ANYHGADoALA4VEagFwOJwX6YDQJxwW6YEkJ2gc4AaQM6EyzItgBQG+zI1QPmS+/33ZXoALhBvyzEA6M+tPmajAJQF4YX3Ab8fBEAQBP1+GEBZPh/owflN2J0CAcrXf37/+x9elOMClOWrRwgfngXfJhzgkxWeX131/dXVmxeGm1gAorQJYAKYACaACWACmAAmgAlgApgAJoAJYAKYACaACWACmAAmgAlgApgAfjjAfwHrOsdxeJHingAAAABJRU5ErkJggg==\"","import { AppStateType } from \"../redux-store\";\r\n\r\nexport const getUsers = (state: AppStateType) =>\r\n    state.usersPage.users\r\n\r\nexport const getPageSize = (state: AppStateType) =>\r\n    state.usersPage.pageSize\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) =>\r\n    state.usersPage.totalUsersCount\r\n\r\nexport const getCurrentPage = (state: AppStateType) =>\r\n    state.usersPage.currentPage\r\n\r\nexport const getIsFetching = (state: AppStateType) => \r\n    state.usersPage.isFetching\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) =>\r\n    state.usersPage.followingInProgress\r\n\r\nexport const getIsAuth = (state: AppStateType) =>\r\n    state.authorization.isAuth\r\n\r\nexport const getFilter = (state: AppStateType) =>\r\n    state.usersPage.filter","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"Login_error__2s83K\",\"loginForm\":\"Login_loginForm__1sbSj\",\"email\":\"Login_email__1nHbB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileStatus\":\"ProfileStatus_profileStatus__1aoaG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Textarea\":\"AddNewPost_Textarea__waG-0\",\"inputField\":\"AddNewPost_inputField__2iN8c\"};","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { connect} from 'react-redux';\r\nimport { AppStateType } from '../redux/redux-store';\r\n\r\n//state for HOC withAuthRedirect\r\nlet mapStateToPropsForRedirect = (state: AppStateType) =>{\r\n    return {\r\n        isAuth: state.authorization.isAuth\r\n    }\r\n}\r\n\r\ntype MSTPtype = {\r\n    isAuth: boolean\r\n}\r\n\r\n\r\nconst withAuthRedirect = <P extends object>(Component: React.ComponentType<P>) => {\r\n\r\n    class RedirectComponent extends React.Component<MSTPtype>{\r\n        render(){\r\n            const {isAuth, ...props} = this.props\r\n            return !isAuth ? <Redirect to=\"/login\"/>: <Component {...props as P} />\r\n        }\r\n    }\r\n    \r\n    const ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n    //return component already with redirect\r\n    return ConnectedAuthRedirectComponent;\r\n}\r\n\r\nexport default withAuthRedirect;","import { InferActionsType, ThunkType } from \"../types/types\";\r\n\r\nconst ADD_MESSAGE = 'ADD-MESSAGE';\r\n\r\ntype DialogType={\r\n    id: number\r\n    name: string\r\n}\r\ntype MessageType={\r\n    id: number\r\n    message: string\r\n}\r\n\r\nconst initialState = {\r\n    messageData:[\r\n        {id: 1, message: \"Hello World\"},\r\n        {id: 2, message: \"Here will be message section soon :-)\"}\r\n    ] as Array<MessageType> , \r\n    dialogData: [\r\n        {id: 1, name: \"User1\"},\r\n        {id: 2, name: \"User2\"},\r\n        {id: 3, name: \"User3\"},\r\n        {id: 4, name: \"User4\"},\r\n        {id: 5, name: \"User5\"},\r\n        {id: 6, name: \"User6\"},\r\n        {id: 7, name: \"User7\"}\r\n    ] as Array<DialogType>,\r\n    newMessageText: \"\" as string\r\n};\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\n\r\n\r\nconst dialogsReducer = (state = initialState, action: DialogActionCreatorsType):InitialStateType  => {\r\n\r\n    switch (action.type) {\r\n        case ADD_MESSAGE:\r\n            let newMessageObj = {\r\n                id: 5,\r\n                message: action.message,\r\n            };\r\n            return {\r\n                ...state,\r\n                messageData: [...state.messageData, newMessageObj], //append newMessage into messageData array\r\n                newMessageText: \"\"\r\n            };\r\n            \r\n        default:\r\n            return state;\r\n            \r\n    }\r\n};\r\n\r\n\r\n// action creators\r\ntype DialogActionCreatorsType = InferActionsType<typeof dialogsActionCreators>\r\n\r\nconst dialogsActionCreators ={\r\n    addMessageActionCreator: (message: string) => ({type: ADD_MESSAGE, message})\r\n} \r\n\r\n//thunk creator\r\n\r\ntype DialogThunksType = ThunkType<DialogActionCreatorsType>\r\n\r\nexport const addMessage = (message: string): DialogThunksType => {\r\n    return (dispatch)=> dispatch(dialogsActionCreators.addMessageActionCreator(message))\r\n};\r\n\r\n\r\nexport default dialogsReducer;","import { FilterType, UsersType } from './../redux/users-reducer';\r\nimport { instance, ResultCode } from './api';\r\n\r\nexport const usersAPI = {\r\n    // Get Array of users from server for current page\r\n    getUsers(currentPage = 1, pageSize = 10, filter: FilterType = {term: \"\", friend: null}) {\r\n        return (instance.get<GetUsersResponseType>(`users?page=${currentPage}&count=${pageSize}&term=${filter.term}` + \r\n            (filter.friend === null ? '' : `&friend=${filter.friend}`))\r\n            .then(response => response.data)\r\n        );\r\n    },\r\n\r\n\r\n    followUser(userId: number) {\r\n        return (\r\n            instance.post<FollowedUserResponseType>(`follow/${userId}`)\r\n                .then(response => response.data)\r\n        );\r\n\r\n    },\r\n    unfollowUser(userId: number) {\r\n        return (\r\n            instance.delete<FollowedUserResponseType>(`follow/${userId}`)\r\n                .then(response => response.data)\r\n        );\r\n    }\r\n};\r\n\r\nexport type GetUsersResponseType = {\r\n    items: Array<UsersType>\r\n\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n\r\nexport type FollowedUserResponseType = {\r\n    resultCode: ResultCode\r\n    messages: Array<string>\r\n    data: any\r\n}\r\n","import { ResultCode } from \"../api/api\";\r\nimport {usersAPI} from \"../api/usersAPI\";\r\nimport { PhotosType, InferActionsType, ThunkType } from \"../types/types\";\r\nimport { friendsItemsActions, FriendItemsActionsType } from \"./friendItems-reducer\";\r\n\r\n//Initial State\r\n\r\nexport type UsersType = {\r\n    id: number\r\n    name: string\r\n    status: string\r\n    photos: PhotosType\r\n    followed: boolean\r\n}\r\n\r\nlet initialState = {\r\n    users:[] as Array<UsersType>,\r\n    pageSize: 8,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    isFollow: false,\r\n    followingInProgress: [] as Array<number>, // array of users id`s\r\n    filter: {\r\n        term: \"\",\r\n        friend: null as boolean | null\r\n    }\r\n};\r\n\r\n\r\n\r\n//Reducer\r\n\r\nconst usersReducer = (state = initialState, action: UserReducerActionsTypes):initialStateType => {\r\n\r\n    switch (action.type) {\r\n        //change following of user\r\n        case 'app/users-reducer/TOGGLE_FOLLOWING':\r\n            return {\r\n                ...state,\r\n                users: state.users.map( u => {\r\n                    if (u.id === action.userId){\r\n                        return {...u, followed: action.userFollowed }\r\n                    }\r\n                        \r\n                    return u;\r\n                })\r\n            };\r\n        \r\n        //set users for current page\r\n        case 'app/users-reducer/SET-USERS':\r\n            return {...state, users: action.users};\r\n        \r\n        //set filter options\r\n        case 'app/users-reducer/SET-FILTER':\r\n            return {...state, filter: action.payload.filter}\r\n\r\n        //set current page of users\r\n        case 'app/users-reducer/SELECT-PAGE':\r\n            return {...state, currentPage: action.currentPage};\r\n        \r\n        //set total amount of users\r\n        case 'app/users-reducer/SET-TOTAL-COUNT':\r\n            return {...state, totalUsersCount: action.totalCount};\r\n\r\n        case 'app/users-reducer/TOGGLE_IS_FETCHING':\r\n            return{...state, isFetching: action.isFetching};\r\n\r\n        case 'app/users-reducer/TOGGLE_IS_FOLLOW_FETCHING':\r\n            return{...state, \r\n                followingInProgress: action.isFetching \r\n                ? [...state.followingInProgress, action.userId] //disable only button of user what we follow/unfollow during server request\r\n                : state.followingInProgress.filter(id => id !== action.userId) //delete user id from array\r\n            }\r\n        default:\r\n            return state;\r\n            \r\n    }\r\n};\r\n\r\n\r\n//action creators\r\ntype UserReducerActionsTypes = InferActionsType<typeof userReducerActionsCreators>\r\n\r\nexport const userReducerActionsCreators = {\r\n    setUsers: (users: Array<UsersType>)  => ({ type: 'app/users-reducer/SET-USERS', users} as const),\r\n    selectPage: (currentPage: number)  => ({ type: 'app/users-reducer/SELECT-PAGE', currentPage} as const),\r\n    setFilter: (filter: FilterType)  => \r\n        ({ type: 'app/users-reducer/SET-FILTER', payload: {filter}} as const),\r\n    setTotalCount: (totalCount: number) => ({ type: 'app/users-reducer/SET-TOTAL-COUNT', totalCount} as const),\r\n    toggleIsFetching: (isFetching: boolean)  => ({ type: 'app/users-reducer/TOGGLE_IS_FETCHING', isFetching} as const),\r\n    toggleIsFollowFetching: (isFetching: boolean, userId: number) => \r\n        ({ type: 'app/users-reducer/TOGGLE_IS_FOLLOW_FETCHING', isFetching, userId} as const),\r\n    toggleFollowing: (userId:number, userFollowed: boolean) => \r\n        ({type: 'app/users-reducer/TOGGLE_FOLLOWING', userId, userFollowed} as const)\r\n}\r\n\r\n\r\n//thunk creators\r\n\r\n\r\n\r\nexport const getUsersWithFilter = (currentPage: number, pageSize: number, filter: FilterType = {term: \"\", friend: null}): UserReducerThunkType => {\r\n    return async (dispatch) => {\r\n        dispatch(userReducerActionsCreators.toggleIsFetching(true));\r\n        dispatch(userReducerActionsCreators.setFilter(filter))\r\n        const data = await usersAPI.getUsers(currentPage, pageSize, filter);\r\n        dispatch(userReducerActionsCreators.toggleIsFetching(false));\r\n        dispatch(userReducerActionsCreators.setUsers(data.items));\r\n        dispatch(userReducerActionsCreators.setTotalCount(data.totalCount));\r\n    };\r\n};\r\n\r\nexport const handlePageChange = (pageNumber:number, pageSize: number, filter: FilterType): UserReducerThunkType => async (dispatch) =>\r\n{\r\n    dispatch(userReducerActionsCreators.selectPage(pageNumber));\r\n    dispatch(userReducerActionsCreators.toggleIsFetching(true));\r\n    //getUsers function what get users from server\r\n    const data = await usersAPI.getUsers(pageNumber, pageSize, filter);\r\n    dispatch(userReducerActionsCreators.toggleIsFetching(false));\r\n    dispatch(userReducerActionsCreators.setUsers(data.items));    \r\n}\r\n\r\n\r\nexport const toggleFollowingUser = (userId: number, userFollowed: boolean): UserReducerThunkType => {\r\n    return async (dispatch, getState) => {\r\n        dispatch(userReducerActionsCreators.toggleIsFollowFetching(true, userId));\r\n        if (userFollowed === false){\r\n            let data = await usersAPI.followUser(userId);\r\n            if (data.resultCode === ResultCode.success) {\r\n                let state = getState()\r\n                const user = state.usersPage.users.filter(item => item.id === userId)[0]\r\n                dispatch(userReducerActionsCreators.toggleFollowing(userId, true))\r\n                dispatch(friendsItemsActions.addFollowingUser(user))\r\n            }\r\n        };\r\n        if (userFollowed === true){\r\n            let data = await usersAPI.unfollowUser(userId);\r\n            if (data.resultCode === ResultCode.success) {\r\n                dispatch(userReducerActionsCreators.toggleFollowing(userId, false))\r\n                dispatch(friendsItemsActions.removeUserFromFriendsItems(userId))\r\n            }\r\n        };\r\n        \r\n        dispatch(userReducerActionsCreators.toggleIsFollowFetching(false, userId));\r\n    }\r\n\r\n}\r\n\r\nexport default usersReducer;\r\n\r\nexport type initialStateType = typeof initialState\r\ntype UserReducerThunkType = ThunkType<UserReducerActionsTypes | FriendItemsActionsType>\r\nexport type FilterType = typeof initialState.filter"],"sourceRoot":""}